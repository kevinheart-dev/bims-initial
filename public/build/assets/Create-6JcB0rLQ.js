import{r as g,j as e,V as j,O as ce,R as _,L as be,S as ye}from"./app-CSbLTV9t.js";import ge from"./BreadcrumbsHeader-CQaDVuiA.js";import{S as je}from"./AdminLayout-CQAB1boG.js";import{S as v,A as C,L as Ne,a as fe,b as ve}from"./Livelihood-CY18oDV9.js";import{I as T}from"./InputField-B1L9QxNV.js";import"./transform-ChDKN-R9.js";import{T as we,t as Ce}from"./index-BKWT8n_e.js";import{P as k}from"./plus-CfpSO3j1.js";import{X as H}from"./x-DSSMIW7T.js";import{c as de}from"./createLucideIcon-K65SoRPX.js";import{C as B}from"./check-xGOvrYiq.js";import"./breadcrumb-BysmSHHT.js";import"./button-Baqcf9KW.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./chevron-right-ZDo9j4tz.js";import"./sidebar-EM1pc_Vu.js";import"./input-HZV2GfRj.js";import"./index-BWMtPXXG.js";import"./index-CLKsPuj0.js";import"./floating-ui.react-dom-DHVDvaGl.js";import"./skeleton-C3jJoeQy.js";import"./tooltip-b0GAWXCC.js";import"./nav-user-qFIfSs4r.js";import"./avatar-DBnd5X0z.js";import"./dropdown-menu-DsAxoPEU.js";import"./useAppUrl-CCPDQKWJ.js";import"./users-round-CTpkNJgD.js";import"./heart-pulse-CgKjARwL.js";import"./chevron-up-BdT9BwPw.js";import"./index-k6Ra7WmB.js";import"./iconBase-DIY0yPu9.js";import"./index-Bw3HOa7F.js";import"./string-CFFdVFMV.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M5 12h14",key:"1ays0h"}]],pe=de("minus",_e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ke=de("square",Re),De=[{category:"Health and Medical Facilities",rows:[{type:"Evacuation Center",households:""},{type:"Flood Control",households:""},{type:"Rain Water Harvester (Communal)",households:""},{type:"Barangay Disaster Operation Center",households:""},{type:"Public Comfort Room/Toilet",households:""},{type:"Community Garden",households:""},{type:"Barangay Health Center",households:""},{type:"Hospital",households:""},{type:"Maternity Clinic",households:""},{type:"Barangay Drug Store",households:""},{type:"City/Municipal Public Drug Store",households:""},{type:"Private Drug Store",households:""},{type:"Quarantine/Isolation Facility",households:""}]},{category:"Education Facilities",rows:[{type:"Child Development Center",households:""},{type:"Preschool",households:""},{type:"Elementary",households:""},{type:"Secondary",households:""},{type:"Vocational",households:""},{type:"College/University",households:""},{type:"Islamic School",households:""}]},{category:"Agricultural Facilities",rows:[{type:"Rice Mill",households:""},{type:"Corn Mill",households:""},{type:"Feed Mill",households:""},{type:"Agriculture Produce Market",households:""}]}],Se=[{category:"Facilities and Services",rows:[{type:"Multi-Purposes Hall",quantity:""},{type:"Barangay Women and Chidren Protection Desk",quantity:""},{type:"Barangay Tanonds and Barangay Peacekeeping Action Teams Post",quantity:""},{type:"Bureau of Jail Management and Penology",quantity:""},{type:"Philippine National Police Outpost",quantity:""},{type:"Bank",quantity:""},{type:"Post Office",quantity:""},{type:"Market",quantity:""}]},{category:"Public Transportation",rows:[{type:"Bus",quantity:""},{type:"Taxi",quantity:""},{type:"Van/FX",quantity:""},{type:"Jeepney",quantity:""},{type:"Tricyle",quantity:""},{type:"Pedicab",quantity:""},{type:"Boat",quantity:""}]},{category:"Road Types",rows:[{type:"Concrete",length:"",maitained_by:""},{type:"Asphalt",length:"",maitained_by:""},{type:"Gravel",length:"",maitained_by:""},{type:"Natural Earth Surface",length:"",maitained_by:""}]}];function Ee({category:t,catIdx:r,updateRow:h,removeRow:d,addRow:b}){return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("h3",{className:"font-semibold text-md mb-2 p-2",children:t.category}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[400px]",children:"Type"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Households"}),e.jsx("th",{className:"px-2 py-1 text-center !border-0 w-[40px]"})]})}),e.jsx("tbody",{children:t.rows.map((c,x)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.type,placeholder:"Enter type",onChange:n=>h(r,x,"type",n.target.value)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:c.households??"",onChange:n=>h(r,x,"households",n.target.value)})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>d(r,x),children:"✕"})})]},x))})]})}),e.jsx("div",{className:"p-2 mt-auto",children:e.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>b(r),children:"+ Add new row"})})]})}function W({category:t,catIdx:r,updateRow:h,removeRow:d,addRow:b}){const c=Object.keys(t.rows[0]||{}).filter(n=>n!=="type"),x={quantity:"Quantity",length:"Length of Road (km)",maintained_by:"Who Maintains the Road Network"};return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[400px]",children:t.category}),c.map(n=>e.jsx("th",{className:"border px-2 py-1 text-center",children:x[n]||n.replace("_"," ")},n)),e.jsx("th",{className:"px-2 py-1 text-center !border-0 w-[40px]"})]})}),e.jsx("tbody",{children:t.rows.map((n,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:n.type,placeholder:"Enter type",onChange:i=>h(r,s,"type",i.target.value)})}),c.map(i=>e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:i==="quantity"?"number":"text",className:"w-full border p-1 text-center",value:n[i]??"",onChange:l=>h(r,s,i,l.target.value)})},i)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>d(r,s),children:"✕"})})]},s))})]})}),e.jsx("div",{className:"p-2 mt-auto",children:e.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>b(r),children:"+ Add new row"})})]})}function Pe(){var s,i,l;const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{var o;(o=t.buildings)!=null&&o.length||r(a=>({...a,buildings:De}))},[t,r]),g.useEffect(()=>{var o;(o=t.facilities)!=null&&o.length||r(a=>({...a,facilities:Se}))},[t,r]);const h=(o,a,u,p)=>{const m=[...t.buildings];m[o].rows[a][u]=u==="households"?p===""?"":Number(p):p,r(y=>({...y,buildings:m}))},d=o=>{const a=[...t.buildings];a[o].rows.push({type:"",households:""}),r(u=>({...u,buildings:a})),j.success(`New row added to "${a[o].category}"`)},b=(o,a)=>{var m;const u=[...t.buildings],p=((m=u[o].rows[a])==null?void 0:m.type)||"row";u[o].rows=u[o].rows.filter((y,N)=>N!==a),r(y=>({...y,buildings:u})),j.error(`Removed "${p}" from "${u[o].category}"`)},c=(o,a,u,p)=>{const m=[...t.facilities];m[o].rows[a][u]=u==="quantity"?p===""?"":Number(p):p,r(y=>({...y,facilities:m}))},x=o=>{const a=[...t.facilities],u=Object.keys(a[o].rows[0]).reduce((p,m)=>({...p,[m]:""}),{});a[o].rows.push(u),r(p=>({...p,facilities:a})),j.success(`New row added to "${a[o].category}"`)},n=(o,a)=>{var m;const u=[...t.facilities],p=((m=u[o].rows[a])==null?void 0:m.type)||"row";u[o].rows=u[o].rows.filter((y,N)=>N!==a),r(y=>({...y,facilities:u})),j.error(`Removed "${p}" from "${u[o].category}"`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{title:"D. Buildings and other Facilities in the Barangay",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(s=t.buildings)==null?void 0:s.map((o,a)=>e.jsx(Ee,{category:o,catIdx:a,updateRow:h,removeRow:b,addRow:d},a))})}),e.jsx(C,{title:"E. Primary Facilities and Services in the Barangay",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(i=t.facilities)==null?void 0:i.slice(0,2).map((o,a)=>e.jsx(W,{category:o,catIdx:a,updateRow:c,removeRow:n,addRow:x},a)),e.jsx("div",{className:"md:col-span-2",children:e.jsx(W,{category:(l=t.facilities)==null?void 0:l[2],catIdx:2,updateRow:c,removeRow:n,addRow:x})})]})})]})}const F=t=>({type:t,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}),Y=[{name:"",male:"",female:"",lgbtq:"",head:"",contact:"",registered:"YES",programs:""}],Ae=[{category:"Medical Personnel/Professionals",rows:["Barangay Health Worker","Barangay Nutrition Scholar","Doctor","Nurse","Midwife","Dentist","Medical Technologist"].map(F)},{category:"Other Professionals",rows:["Fireman/Firewoman","Teacher","Social Worker"].map(F)},{category:"Laborers",rows:["Carpenter","Mason","Electrician","Engineer","Technician","Painter","Plumber","Crane Operator","Truck Driver"].map(F)}],P=["male_no_dis","male_dis","female_no_dis","female_dis","lgbtq_no_dis","lgbtq_dis"],ue=t=>P.reduce((r,h)=>r+(Number(t[h])||0),0),Te=(t,r)=>t.reduce((h,d)=>h+(Number(d[r])||0),0),Fe=t=>t.reduce((r,h)=>r+ue(h),0);function Me({category:t,catIdx:r,updateCategoryName:h,updateRow:d,removeRow:b,addRow:c,removeCategory:x}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{className:"bg-gray-100 px-2 py-1 font-semibold flex items-center justify-between",children:[e.jsx("input",{type:"text",className:"w-full border-none p-1 text-lg font-semibold bg-gray-100",value:t.category,onChange:n=>h(r,n.target.value),placeholder:"Enter category name"}),e.jsx("button",{className:"ml-2 text-red-600 hover:text-red-800 font-bold",onClick:()=>x(r),children:"✕"})]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[250px]",children:"HUMAN RESOURCES"}),e.jsx("th",{colSpan:"6",className:"border px-2 py-1 text-center",children:"NUMBER"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1",children:"Total"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[40px]"})]}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"LGBTQ+"})]}),e.jsx("tr",{children:["Without Disability","With Disability","Without Disability","With Disability","Without Disability","With Disability"].map((n,s)=>e.jsx("th",{className:"border px-2 py-1",children:n},s))})]}),e.jsx("tbody",{children:t.rows.map((n,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:n.type,onChange:i=>d(r,s,"type",i.target.value)})}),P.map(i=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:n[i]??"",onChange:l=>d(r,s,i,l.target.value)})},i)),e.jsx("td",{className:"border px-2 py-1 text-center font-semibold bg-gray-50",children:ue(n)}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>b(r,s),children:"✕"})})]},s))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),P.map(n=>e.jsx("td",{className:"border px-2 py-1 text-center",children:Te(t.rows,n)},n)),e.jsx("td",{className:"border px-2 py-1 text-center",children:Fe(t.rows)}),e.jsx("td",{className:"border"})]})})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:underline",onClick:()=>c(r),children:"+ Add new row"})]})}function He({institutions:t,instIdx:r,updateField:h,removeInstitution:d,addInstitution:b}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[250px]",rowSpan:"2",children:"NAME OF INSTITUTION/ SECTOR/ GROUP"}),e.jsx("th",{colSpan:"3",className:"border px-2 py-1 text-center",children:"NUMBER OF MEMBERS"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"NAME OF HEAD"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"CONTACT NO."}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"STATUS (REGISTERED OR NOT)"}),e.jsx("th",{className:"border px-2 py-1",rowSpan:"2",children:"PROGRAMS/ SERVICES"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 text-center",children:"MALE"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"FEMALE"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"LGBTQ"})]})]}),e.jsx("tbody",{children:t.map((c,x)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.name,onChange:n=>h(r,x,"name",n.target.value)})}),["male","female","lgbtq"].map(n=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:c[n],onChange:s=>h(r,x,n,s.target.value)})},n)),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.head,onChange:n=>h(r,x,"head",n.target.value)})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.contact,onChange:n=>h(r,x,"contact",n.target.value)})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"w-full border p-1",value:c.registered,onChange:n=>h(r,x,"registered",n.target.value),children:[e.jsx("option",{value:"YES",children:"YES"}),e.jsx("option",{value:"NO",children:"NO"})]})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.programs,onChange:n=>h(r,x,"programs",n.target.value)})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>d(r,x),children:"✕"})})]},x))})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:underline",onClick:()=>b(r),children:"+ Add new row"})]})}const Be=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{t.human_resources||r(o=>({...o,human_resources:Ae}))},[t,r]);const h=(o,a)=>{const u=[...t.human_resources];u[o].category=a,r(p=>({...p,human_resources:u}))},d=(o,a,u,p)=>{const m=[...t.human_resources];m[o].rows[a][u]=u==="type"?p:p===""?"":Number(p),r(y=>({...y,human_resources:m}))},b=o=>{const a=[...t.human_resources];a[o].rows.push({type:"",...Object.fromEntries(P.map(u=>[u,""]))}),r(u=>({...u,human_resources:a})),j.success("Row added!")},c=(o,a)=>{var m;const u=[...t.human_resources],p=((m=u[o].rows[a])==null?void 0:m.type)||"Row";u[o].rows.splice(a,1),r(y=>({...y,human_resources:u})),j.error(`${p} removed!`)},x=()=>{const o=[...t.human_resources];o.push({category:"",rows:[{type:"",...Object.fromEntries(P.map(a=>[a,""]))}]}),r(a=>({...a,human_resources:o})),j.success("New category added!")},n=o=>{const a=[...t.human_resources],u=a[o].category||"Category";a.splice(o,1),r(p=>({...p,human_resources:a})),j.error(`${u} removed!`)};g.useEffect(()=>{t.institutions||r(o=>({...o,institutions:Y}))},[t,r]);const s=(o,a,u,p)=>{const m=[...t.institutions];m[a][u]=u==="male"||u==="female"||u==="lgbtq"?p===""?"":Number(p):p,r(y=>({...y,institutions:m}))},i=o=>{const a=[...t.institutions];a.push({...Y[0]}),r(u=>({...u,institutions:a})),j.success("Row added!")},l=(o,a)=>{var m;const u=[...t.institutions],p=((m=u[a])==null?void 0:m.name)||"Institution";u.splice(a,1),r(y=>({...y,institutions:u})),j.error(`${p} removed!`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{title:"F. Inventory of Institutions, Sectors, and other Volunteer Groups in the Barangay",children:e.jsx(He,{institutions:t.institutions||[],instIdx:0,updateField:s,removeInstitution:l,addInstitution:i})}),e.jsxs(C,{title:"G. Inventory of Human Resources",children:[(t.human_resources||[]).map((o,a)=>e.jsx(Me,{category:o,catIdx:a,updateCategoryName:h,updateRow:d,removeRow:c,addRow:b,removeCategory:n},a)),e.jsx("button",{className:"mt-3 text-green-600 hover:underline",onClick:x,children:"+ Add new category"})]})]})};function Le(){var a,u;const{craData:t,setCraData:r}=g.useContext(v),h=["Owned (Land and House)","Rented","Shared with Owner","Shared with Renter","Owned (House)","Informal Settler Families"],d=["Concrete","Semi-Concrete","Made of wood and light materials","Salvaged/Makeshift House"],b=["0_6_mos","7_mos_to_2_yrs","3_to_5_yrs","6_to_12_yrs","13_to_17_yrs","18_to_59_yrs","60_plus_yrs"];g.useEffect(()=>{console.log("CRA Data:",t),(!t.population||t.population.length===0)&&r(p=>({...p,population:b.map(m=>({ageGroup:m,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}))})),(!t.houses||t.houses.length===0)&&r(p=>({...p,houses:d.map(m=>({houseType:m,oneFloor:"",multiFloor:""}))}))},[t,r]);const c=(p,m,y)=>{r(N=>{const f=[...N.population];return f[p][m]=y===""?"":Number(y),{...N,population:f}})},x=p=>{var y;const m=((y=t.population)==null?void 0:y[p])||{};return Object.entries(m).filter(([N])=>N!=="ageGroup").reduce((N,[,f])=>N+(f||0),0)},n=p=>{var m;return(m=t.population)==null?void 0:m.reduce((y,N)=>y+(N[p]||0),0)},s=()=>{var p;return(p=t.population)==null?void 0:p.reduce((m,y,N)=>m+x(N),0)},i=(p,m,y)=>{r(N=>{const f=[...N.houses];return f[p][m]=y===""?"":Number(y),{...N,houses:f}})},l=p=>{var m;return(m=t.houses)==null?void 0:m.reduce((y,N)=>y+(N[p]||0),0)},o=()=>{var p;return(p=t.houses)==null?void 0:p.reduce((m,y)=>m+(y.oneFloor||0)+(y.multiFloor||0),0)};return g.useEffect(()=>{(!t.populationGender||t.populationGender.length===0)&&r(p=>({...p,populationGender:[{gender:"male",value:p.malePopulation??""},{gender:"female",value:p.femalePopulation??""},{gender:"lgbtq",value:p.lgbtqPopulation??""}]}))},[]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(C,{title:"A. Information on Population and Resident",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("section",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold mb-0",children:"General Population"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(T,{type:"number",name:"barangayPopulation",label:"Barangay Population",placeholder:"Total Population",value:t.barangayPopulation??"",onChange:p=>r(m=>({...m,barangayPopulation:p.target.value===""?"":Number(p.target.value)}))}),e.jsx(T,{type:"number",name:"householdsPopulation",label:"Households Population",placeholder:"Total Households",value:t.householdsPopulation??"",onChange:p=>r(m=>({...m,householdsPopulation:p.target.value===""?"":Number(p.target.value)}))}),e.jsx(T,{type:"number",name:"familiesPopulation",label:"Families Population",placeholder:"Total Families",value:t.familiesPopulation??"",onChange:p=>r(m=>({...m,familiesPopulation:p.target.value===""?"":Number(p.target.value)}))})]})]}),e.jsxs("section",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold mb-0",children:"Population Based on Gender/Sex"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["female","male","lgbtq"].map((p,m)=>{var y,N;return e.jsx(T,{type:"number",name:`${p}Population`,label:`${p.charAt(0).toUpperCase()+p.slice(1)} Population`,placeholder:p.charAt(0).toUpperCase()+p.slice(1),value:((N=(y=t.populationGender)==null?void 0:y[m])==null?void 0:N.value)??"",onChange:f=>{const R=f.target.value===""?"":Number(f.target.value);r(D=>{const A=[...D.populationGender||[]];return A[m]={gender:p,value:R},{...D,populationGender:A}})}},p)})})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 mt-6",children:"Population according to Age"}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Age Group"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1",children:"LGBTQ+"}),e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Total"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"Without Disability"}),e.jsx("th",{className:"border px-2 py-1",children:"With Disability"})]})]}),e.jsx("tbody",{children:(a=t.population)==null?void 0:a.map((p,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:p.ageGroup}),Object.keys(p).filter(y=>y!=="ageGroup").map((y,N)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:p[y]??"",onChange:f=>c(m,y,f.target.value)})},N)),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:x(m)})]},m))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("male_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("male_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("female_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("female_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("lgbtq_no_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n("lgbtq_dis")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:s()})]})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mt-6",children:[e.jsxs("section",{className:"flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Number of Houses according to Build (Materials Used)"}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border text-sm h-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"TYPES OF HOUSES"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of Houses with 1 Floor"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of Houses with 2 or more Floors"}),e.jsx("th",{className:"border px-2 py-1",children:"Total"})]})}),e.jsx("tbody",{children:(u=t.houses)==null?void 0:u.map((p,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:p.houseType}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:p.oneFloor??"",onChange:y=>i(m,"oneFloor",y.target.value)})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:p.multiFloor??"",onChange:y=>i(m,"multiFloor",y.target.value)})}),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:(p.oneFloor||0)+(p.multiFloor||0)})]},m))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:l("oneFloor")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:l("multiFloor")}),e.jsx("td",{className:"border px-2 py-1 text-center",children:o()})]})})]})})]}),e.jsxs("section",{className:"flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Number of Houses according to Type of Ownership"}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full border text-sm h-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Type of Ownership"}),e.jsx("th",{className:"border px-2 py-1",children:"Quantity"})]})}),e.jsx("tbody",{children:h.map((p,m)=>{var y;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:p}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:((y=t.ownership)==null?void 0:y[p])??"",onChange:N=>r(f=>({...f,ownership:{...f.ownership,[p]:N.target.value===""?"":Number(N.target.value)}}))})})]},m)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:Object.values(t.ownership||{}).reduce((p,m)=>p+(m||0),0)})]})})]})})]})]})]}),e.jsx(Ne,{}),e.jsx(Pe,{}),e.jsx(Be,{})]})}function U({data:t,updateField:r,handleBlur:h,addRow:d,removeRow:b,label:c}){return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Priority Hazards"}),e.jsx("th",{colSpan:"5",className:"border px-2 py-1",children:c}),e.jsx("th",{className:"border px-2 py-1"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"People"}),e.jsx("th",{className:"border px-2 py-1",children:"Properties"}),e.jsx("th",{className:"border px-2 py-1",children:"Services"}),e.jsx("th",{className:"border px-2 py-1",children:"Environment"}),e.jsx("th",{className:"border px-2 py-1",children:"Livelihood"})]})]}),e.jsx("tbody",{children:t.map((x,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:x.hazard==="None"?"":x.hazard,onChange:s=>r(n,"hazard",s.target.value),onBlur:s=>h(n,"hazard",s.target.value),placeholder:"e.g., Typhoon"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1",value:x.people,onChange:s=>r(n,"people",s.target.value),placeholder:"e.g., 5142",min:"0"})}),["properties","services","environment","livelihood"].map(s=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{className:"w-full border p-1",value:x[s]==="None"?"":x[s],onChange:i=>r(n,s,i.target.value),onBlur:i=>h(n,s,i.target.value),placeholder:`Enter ${s}`})},s)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>b(n),children:"✕"})})]},n))})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:underline",onClick:d,children:"+ Add new row"})]})}const ze=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{(!t.risks||t.risks.length===0)&&r(c=>({...c,risks:[{hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}]})),(!t.vulnerabilities||t.vulnerabilities.length===0)&&r(c=>({...c,vulnerabilities:[{hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}]}))},[t,r]);const h=c=>({updateField:(l,o,a)=>{const u=[...t[c]];u[l][o]=o==="people"?a===""?"":Number(a):a,r(p=>({...p,[c]:u}))},handleBlur:(l,o,a)=>{const u=[...t[c]];o!=="people"&&a.trim()===""&&(u[l][o]="None"),r(p=>({...p,[c]:u}))},addRow:()=>{const l=[...t[c]||[]];l.push({hazard:"",people:"",properties:"",services:"",environment:"",livelihood:""}),r(o=>({...o,[c]:l})),j.success(`${c==="risks"?"Risk":"Vulnerability"} row added!`)},removeRow:l=>{var u;const o=[...t[c]],a=((u=o[l])==null?void 0:u.hazard)||"Row";o.splice(l,1),r(p=>({...p,[c]:o})),j.error(`${a} removed!`)}}),d=h("risks"),b=h("vulnerabilities");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"mt-8 pt-6 font-bold text-md",children:"2.1 Public Health - Risk Assessment Matrix"}),e.jsx(U,{data:t.risks||[],label:"RISK TO THE COMMUNITY",...d}),e.jsx("p",{className:"mt-8 pt-6 font-bold text-md",children:"2.2 Public Health - Vulnerability Assessment Matrix"}),e.jsx(U,{data:t.vulnerabilities||[],label:"VULNERABILITY TO THE COMMUNITY",...b})]})},xe=["Deaf/Hard of Hearing","Speech/Language Impairment","Visual Disability","Mental Disability","Intellectual Disability","Learning Disability","Physical Disability","Psychosocial Disability","Orthopedic Disability"],Oe=[{label:"0-6Y",cols:2},{label:"7M-2Y",cols:2},{label:"3-5Y",cols:2},{label:"6-12Y",cols:3},{label:"13-17Y",cols:3},{label:"18-59Y",cols:3},{label:"60Y+",cols:3}],Ge=["M","F","M","F","M","F","M","F","LGBTQ","M","F","LGBTQ","M","F","LGBTQ","M","F","LGBTQ"],E=["age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age6_12LGBTQ","age13_17M","age13_17F","age13_17LGBTQ","age18_59M","age18_59F","age18_59LGBTQ","age60upM","age60upF","age60upLGBTQ"],V=(t="")=>E.reduce((r,h)=>({...r,[h]:""}),{type:t}),qe=()=>e.jsxs("thead",{className:"bg-gray-100 text-sm",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border p-1",children:"Type"}),Oe.map((t,r)=>e.jsx("th",{colSpan:t.cols,className:"border p-1 text-center",children:t.label},r)),e.jsx("th",{rowSpan:"2",className:"border p-1 text-center",children:"TOTAL"}),e.jsx("th",{rowSpan:"2",className:"border p-1"})]}),e.jsx("tr",{children:Ge.map((t,r)=>e.jsx("th",{className:"border p-1 text-center",children:t},r))})]}),$e=({row:t,rowIdx:r,updateField:h,removeRow:d,inputRefs:b})=>{const c=t.type===""||!xe.includes(t.type);return e.jsxs("tr",{children:[e.jsx("td",{className:"border p-1 text-sm",children:c?e.jsx("input",{ref:x=>b.current[r]=x,type:"text",value:t.type,className:"w-full border p-1 text-sm",onChange:x=>h(r,"type",x.target.value),placeholder:"Enter Disability"}):t.type}),E.map(x=>e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:t[x],className:"w-full text-center border p-1",onChange:n=>h(r,x,n.target.value)})},x)),e.jsx("td",{className:"border p-1 text-center font-bold",children:E.reduce((x,n)=>x+(Number(t[n])||0),0)}),e.jsx("td",{className:"border p-1 text-center",children:c?e.jsx("button",{onClick:()=>d(r),className:"w-5 h-5 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200",children:e.jsx(H,{className:"w-3 h-3"})}):e.jsx("div",{className:"w-5 h-5"})})]})},We=({rows:t})=>e.jsxs("tr",{className:"bg-gray-50 font-bold text-sm",children:[e.jsx("td",{className:"border p-1",children:"TOTAL"}),E.map(r=>e.jsx("td",{className:"border p-1 text-center",children:t.reduce((h,d)=>h+(Number(d[r])||0),0)},r)),e.jsx("td",{className:"border p-1 text-center",children:t.reduce((r,h)=>r+E.reduce((d,b)=>d+(Number(h[b])||0),0),0)}),e.jsx("td",{className:"border p-1"})]});function Ye(){var s;const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]),[d,b]=g.useState((s=t.pwd)!=null&&s.length?t.pwd:xe.map(i=>V(i)));g.useEffect(()=>{r(i=>({...i,pwd:d}))},[d,r]);const c=(i,l,o)=>{const a=d.map((u,p)=>p===i?{...u,[l]:E.includes(l)?o.replace(/\D/g,""):o}:u);b(a)},x=()=>{b(i=>{const l=[...i,V()];return setTimeout(()=>{var o;return(o=h.current[l.length-1])==null?void 0:o.focus()},0),l}),j.success("New disability row added!")},n=i=>{b(d.filter((l,o)=>o!==i)),j.error("Disability row removed!")};return e.jsxs("div",{className:"border rounded-lg shadow-sm p-2 overflow-auto",children:[e.jsx("h3",{className:"text-base font-semibold mb-2 text-gray-800",children:"Persons with Disability (PWD) by Age Group"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border table-auto text-sm",children:[e.jsx(qe,{}),e.jsxs("tbody",{children:[d.map((i,l)=>e.jsx($e,{row:i,rowIdx:l,updateField:c,removeRow:n,inputRefs:h},l)),e.jsx(We,{rows:d})]})]})}),e.jsxs("button",{className:"mt-2 flex items-center gap-2 px-3 py-1 bg-blue-500 text-white rounded-full shadow hover:bg-blue-600 transition",onClick:x,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Add Disability"})]})]})}const Q=[{value:"Number of Informal Settler Families",count:""},{value:"Number of Employed Individuals",count:""},{value:"Number of Families Aware of the Effects of Risks and Hazards",count:""},{value:"Number of Families with Access to Information (radio/TV/newspaper/social media, etc.)",count:""},{value:"Number of Families who received Financial Assistance",count:""},{value:"Number of Families with Access to Early Warning System",count:""}],Ue=()=>{var x,n,s,i,l;const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{if(!t.disaster_per_purok||t.disaster_per_purok.length===0){const o=Array.from({length:7},(a,u)=>({purok:`${u+1}`,rowsValue:Q.map(p=>({...p}))}));r(a=>({...a,disaster_per_purok:o}))}},[t,r]);const h=(o,a,u,p=null)=>{const m=t.disaster_per_purok.map((y,N)=>{if(N!==o)return y;if(p!==null){const f=y.rowsValue.map((R,D)=>D===p?{...R,count:u.replace(/\D/g,"")}:R);return{...y,rowsValue:f}}return{...y,[a]:u}});r(y=>({...y,disaster_per_purok:m}))},d=()=>{const o={purok:"",rowsValue:Q.map(a=>({...a}))};r(a=>({...a,disaster_per_purok:[...a.disaster_per_purok,o]})),j.success("Purok added successfully!")},b=o=>{const a=t.disaster_per_purok.filter((u,p)=>p!==o);r(u=>({...u,disaster_per_purok:a})),j.error("Purok removed!")},c=((n=(x=t.disaster_per_purok)==null?void 0:x[0])==null?void 0:n.rowsValue.map((o,a)=>t.disaster_per_purok.reduce((u,p)=>u+Number(p.rowsValue[a].count||0),0)))||[];return e.jsxs("div",{className:"p-4",children:[e.jsx(ce,{position:"top-right"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border p-1 text-center",children:"Purok"}),(i=(s=t.disaster_per_purok)==null?void 0:s[0])==null?void 0:i.rowsValue.map((o,a)=>e.jsx("th",{className:"border p-1 text-center",children:o.value},a)),e.jsx("th",{className:"border p-1 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[(l=t.disaster_per_purok)==null?void 0:l.map((o,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:o.purok,onChange:u=>h(a,"purok",u.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),o.rowsValue.map((u,p)=>e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:u.count,onChange:m=>h(a,"count",m.target.value,p),className:"w-full text-center text-xs p-1 border rounded"})},p)),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>b(a),children:"✕"})})]},a)),e.jsxs("tr",{className:"bg-gray-200 font-bold",children:[e.jsx("td",{className:"border p-1 text-center",children:"Total"}),c.map((o,a)=>e.jsx("td",{className:"border p-1 text-center",children:o},a)),e.jsx("td",{className:"border p-1"})]})]})]})}),e.jsxs("button",{className:"m-2 flex items-center gap-2 px-3 py-1 bg-blue-300 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:d,children:[e.jsx(k,{className:"w-2 h-2"}),e.jsx("span",{className:"text-xs",children:"Add Purok"})]})]})},Ve=[{illness:"Hypertension",children:"",adults:""},{illness:"Acute Respiratory Infection (AURI)",children:"",adults:""},{illness:"Diabetes Mellitus",children:"",adults:""},{illness:"Scabies",children:"",adults:""},{illness:"Infected Wound",children:"",adults:""},{illness:"Influenza",children:"",adults:""},{illness:"Urinary Tract Infection (UTI)",children:"",adults:""},{illness:"Skin Allergy",children:"",adults:""},{illness:"Boil",children:"",adults:""},{illness:"Chicken Pox",children:"",adults:""},{illness:"Diarrhea",children:"",adults:""},{illness:"Dengue",children:"",adults:""},{illness:"Stroke",children:"",adults:""}],Qe=()=>{var x,n;const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{(!t.illnesses||t.illnesses.length===0)&&r(s=>({...s,illnesses:Ve}))},[t,r]);const h=(s,i,l)=>{const o=t.illnesses.map((a,u)=>u===s?{...a,[i]:i==="illness"?l:l.replace(/\D/g,"")}:a);r(a=>({...a,illnesses:o}))},d=()=>{const s={illness:"New Illness",children:"",adults:""};r(i=>({...i,illnesses:[...i.illnesses,s]})),j.success("Illness added successfully!")},b=s=>{const i=t.illnesses.filter((l,o)=>o!==s);r(l=>({...l,illnesses:i})),j.error("Illness removed!")},c=((x=t.illnesses)==null?void 0:x.reduce((s,i)=>(s[0]+=Number(i.children)||0,s[1]+=Number(i.adults)||0,s),[0,0]))||[0,0];return e.jsxs("div",{className:"p-4",children:[e.jsx(ce,{position:"top-right"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border p-1 text-center",children:"Illness/Disease"}),e.jsx("th",{className:"border p-1 text-center",children:"Children (17 and below)"}),e.jsx("th",{className:"border p-1 text-center",children:"Adults (18 and above)"}),e.jsx("th",{className:"border p-1 text-center"})]})}),e.jsxs("tbody",{children:[(n=t.illnesses)==null?void 0:n.map((s,i)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.illness,onChange:l=>h(i,"illness",l.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.children,onChange:l=>h(i,"children",l.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"border p-1",children:e.jsx("input",{type:"text",value:s.adults,onChange:l=>h(i,"adults",l.target.value),className:"w-full text-center text-xs p-1 border rounded"})}),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>b(i),children:"✕"})})]},i)),e.jsxs("tr",{className:"bg-gray-200 font-bold",children:[e.jsx("td",{className:"border p-1 text-center",children:"Total"}),e.jsx("td",{className:"border p-1 text-center",children:c[0]}),e.jsx("td",{className:"border p-1 text-center",children:c[1]}),e.jsx("td",{className:"border p-1"})]})]})]})}),e.jsxs("button",{className:"m-2 flex items-center gap-2 px-3 py-1 bg-blue-300 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:d,children:[e.jsx(k,{className:"w-2 h-2"}),e.jsx("span",{className:"text-xs",children:"Add Illness"})]})]})},M=(t="")=>{const r={purok:t};return["families","individualsM","individualsF","lgbtq","age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age13_17M","age13_17F","age18_59M","age18_59F","age60upM","age60upF","pwdM","pwdF","diseasesM","diseasesF","pregnantWomen"].forEach(d=>{r[d]=""}),r};function Ie({tableId:t,riskType:r,purokData:h,updateRiskType:d,updatePurokField:b,addPurokRow:c,removePurokRow:x,removeTable:n,tableIndex:s}){const i=["families","individualsM","individualsF","lgbtq","age0_6M","age0_6F","age7m_2yM","age7m_2yF","age3_5M","age3_5F","age6_12M","age6_12F","age13_17M","age13_17F","age18_59M","age18_59F","age60upM","age60upF","pwdM","pwdF","diseasesM","diseasesF","pregnantWomen"];return e.jsxs("div",{className:"border rounded-lg shadow-sm mb-4 p-2 relative",children:[e.jsx("div",{className:"absolute top-2 right-2 mb-4",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-500 hover:bg-red-200 transition",onClick:()=>n(t),children:e.jsx(pe,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kind of Risk:"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-sm",value:r,onChange:l=>d(t,l.target.value),placeholder:"e.g., TYPHOON, FLOOD, EARTHQUAKE"})]}),e.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-800",children:["3.1.",s+1," Number of Families and Individuals according to Age and Health Condition who are at Risk from"," ",e.jsx("span",{className:"underline",children:r||"[Kind of Risk]"})]}),e.jsxs("table",{className:"w-full border text-[0.6rem] table-fixed",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"45px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"40px"}}),e.jsx("col",{style:{width:"60px"}}),e.jsx("col",{style:{width:"24px"}})]}),e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Purok"}),e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Families"}),e.jsx("th",{colSpan:"3",className:"border p-0.5 text-center whitespace-nowrap",children:"Individuals"}),e.jsx("th",{colSpan:"10",className:"border p-0.5 text-center whitespace-nowrap",children:"Children"}),e.jsx("th",{colSpan:"4",className:"border p-0.5 text-center whitespace-nowrap",children:"Adult"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"PWD"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"Diseases"}),e.jsx("th",{className:"border p-0.5 rotate-90 whitespace-nowrap",rowSpan:"3",children:"Pregnant"}),e.jsx("th",{className:"border p-0.5 whitespace-nowrap",rowSpan:"3"})]}),e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"LGBTQ"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"0-6Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"7M-2Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"3-5Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"6-12Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"13-17Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"18-59Y"}),e.jsx("th",{colSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"60Y+"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{rowSpan:"2",className:"border p-0.5 text-center whitespace-nowrap",children:"F"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"M"}),e.jsx("th",{className:"border p-0.5 text-center whitespace-nowrap",children:"F"})]})]}),e.jsxs("tbody",{children:[(h||[]).map((l,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-0.5",children:e.jsx("input",{type:"text",className:"border p-0.5 w-full text-[0.6rem] text-center",value:l.purok,onChange:a=>b(t,o,"purok",a.target.value),placeholder:"1"})}),i.map(a=>e.jsx("td",{className:"border p-0.5",children:e.jsx("input",{type:"number",className:"border p-0.5 w-full text-[0.6rem] text-center",value:l[a]??"",onChange:u=>b(t,o,a,u.target.value),min:"0"})},a)),e.jsx("td",{className:"p-0.5 text-center !border-0",children:e.jsx("button",{className:"w-4 h-4 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200 mx-auto",onClick:()=>x(t,o),children:"✕"})})]},o)),e.jsxs("tr",{children:[e.jsx("td",{className:"border p-0.5 font-bold",children:"TOTAL"}),i.map(l=>e.jsx("td",{className:"border p-0.5 font-bold text-center",children:(h||[]).reduce((o,a)=>o+(Number(a[l])||0),0)},`total-${l}`)),e.jsx("td",{className:"p-0.5 !border-0"})]})]})]}),e.jsxs("button",{className:"m-2 flex items-center gap-2 px-3 py-1 bg-blue-300 text-white rounded-full shadow hover:bg-blue-700 transition",onClick:()=>c(t),children:[e.jsx(k,{className:"w-2 h-2"}),e.jsx("span",{className:"text-xs",children:"Add Purok"})]})]})}const Ke=()=>{const{craData:t,setCraData:r}=g.useContext(v),[h,d]=g.useState(t.exposure||[{riskType:"",purokData:[M("1")]}]);g.useEffect(()=>{r(l=>({...l,exposure:h}))},[h,r]);const b=(l,o)=>{d(a=>a.map((u,p)=>p===l?{...u,riskType:o}:u))},c=(l,o,a,u)=>{d(p=>p.map((m,y)=>y===l?{...m,purokData:m.purokData.map((N,f)=>f===o?{...N,[a]:u===""?"":Number(u)}:N)}:m))},x=l=>{d(o=>o.map((a,u)=>u===l?{...a,purokData:[...a.purokData,M((a.purokData.length+1).toString())]}:a))},n=(l,o)=>{d(a=>a.map((u,p)=>p===l?{...u,purokData:u.purokData.filter((m,y)=>y!==o)}:u))},s=()=>{d(l=>[...l,{riskType:"",purokData:[M("1")]}])},i=l=>{d(o=>o.filter((a,u)=>u!==l))};return e.jsxs("div",{className:"space-y-5",children:[e.jsx("p",{className:"text-md font-bold",children:"3.1 Population"}),h.map((l,o)=>e.jsxs(_.Fragment,{children:[e.jsx(Ie,{tableId:o,riskType:l.riskType,purokData:l.purokData,updateRiskType:b,updatePurokField:c,addPurokRow:x,removePurokRow:n,removeTable:i,tableIndex:o}),e.jsxs("button",{className:"m-2 flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-full shadow hover:bg-green-600 transition",onClick:s,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Add New Risk Table"})]})]},o)),e.jsx("p",{className:"text-md font-bold",children:"3.2 Deatailed Number of Persons with Disabilities"}),e.jsx(Ye,{}),e.jsx("p",{className:"text-md font-bold",children:"3.3 Number of Families at Risk of Hazards and Disaster per Purok"}),e.jsx(Ue,{}),e.jsx("p",{className:"text-md font-bold",children:"3.4 Number of Persons with Illnesses or Communicable Diseases"}),e.jsx(Qe,{})]})},he={purok:"",lowFamilies:"",lowIndividuals:"",mediumFamilies:"",mediumIndividuals:"",highFamilies:"",highIndividuals:""},I=()=>Array.from({length:7},(t,r)=>({...he,purok:`${r+1}`})),K=[{key:"lowFamilies",label:"Families",group:"Low Risk"},{key:"lowIndividuals",label:"Individuals",group:"Low Risk"},{key:"mediumFamilies",label:"Families",group:"Medium Risk"},{key:"mediumIndividuals",label:"Individuals",group:"Medium Risk"},{key:"highFamilies",label:"Families",group:"High Risk"},{key:"highIndividuals",label:"Individuals",group:"High Risk"}],Je=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=t.disaster_per_purok||[];g.useEffect(()=>{h.length||r(l=>({...l,disaster_per_purok:[{type:"Typhoon",rows:I()}]}))},[h,r]);const d=g.useCallback((l,o)=>{r(a=>{const u=[...a.disaster_per_purok||[]];return u[l]={type:"",rows:[],...u[l],...o(u[l])},{...a,disaster_per_purok:u}})},[r]),b=(l,o)=>d(l,()=>({type:o})),c=(l,o,a,u)=>d(l,p=>{const m=[...p.rows||[]];return m[o]={...m[o],[a]:u},{rows:m}}),x=()=>{r(l=>({...l,disaster_per_purok:[...l.disaster_per_purok||[],{type:"",rows:I()}]})),j.success("New hazard category added!")},n=l=>{r(o=>({...o,disaster_per_purok:(o.disaster_per_purok||[]).filter((a,u)=>u!==l)})),j.success("Hazard category removed!")},s=l=>d(l,o=>({rows:[...o.rows||[],{...he}]})),i=(l,o)=>d(l,a=>({rows:(a.rows||[]).filter((u,p)=>p!==o)}));return e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-bold mb-4",children:"4.1 Number of Families and Individuals at Risk of Hazards per Purok based on the following categories:"}),h.map((l,o)=>e.jsxs("div",{className:"mb-8 border rounded p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("input",{type:"text",placeholder:"Enter Hazard Type (e.g., Typhoon)",value:l.type||"",onChange:a=>b(o,a.target.value),className:"border px-3 py-2 rounded w-1/2 text-sm"}),e.jsx("button",{onClick:()=>n(o),className:"ml-2 w-6 h-6 flex items-center justify-center rounded-full bg-red-100 text-red-500 hover:bg-red-500 hover:text-white",title:"Remove Category",children:"✕"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{rowSpan:"2",className:"border px-2 py-1",children:"Areas affected (Purok)"}),["Low Risk","Medium Risk","High Risk"].map(a=>e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:a},a)),e.jsx("th",{rowSpan:"2",className:"border px-2 py-1 text-center"})]}),e.jsx("tr",{className:"bg-gray-100",children:K.map(({label:a},u)=>e.jsx("th",{className:"border px-2 py-1",children:a},u))})]}),e.jsx("tbody",{children:(l.rows||[]).map((a,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"text",value:a.purok||"",onChange:p=>c(o,u,"purok",p.target.value),className:"border w-full px-2 py-1 text-center text-xs"})}),K.map(({key:p},m)=>e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:a[p]||"",onChange:y=>c(o,u,p,y.target.value),className:"border w-full px-2 py-1 text-center text-xs"})},m)),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-red-200",onClick:()=>i(o,u),children:"✕"})})]},u))})]})}),e.jsx("button",{onClick:()=>s(o),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Purok"})]},o)),e.jsx("button",{onClick:x,className:"mt-0 px-4 py-2 bg-green-500 text-white rounded text-sm",children:"+ Add Hazard Category"})]})},w={item:"",total:"",percent:"",location:""},J=[{hazard:"Typhoon",categories:[{type:"Infrastructures",rows:[{...w,item:"Bridge/s"},{...w,item:"Barangay Hall"},{...w,item:"Multi-purpose Building"},{...w,item:"Houses"},{...w,item:"School/s"},{...w,item:"Child Development Center"}]},{type:"Establishments",rows:[{...w,item:"Store"},{...w,item:"Eatery"},{...w,item:"Bakery"}]},{type:"Facilities",rows:[{...w,item:"Water"},{...w,item:"Electricity"},{...w,item:"Telephone/Mobile service"},{...w,item:"Hospitals"},{...w,item:"Barangay Health Center"}]},{type:"Livelihood",rows:[{...w,item:"Rice/Corn Field"},{...w,item:"Vegetables"},{...w,item:"Boats"},{...w,item:"Fish Nets"},{...w,item:"Fish Ponds"}]},{type:"Nature",rows:[{...w,item:"Mountain/s"},{...w,item:"Mangroves"}]}]}],Xe=()=>{var o;const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{var a;(a=t.disaster_inventory)!=null&&a.length||r(u=>({...u,disaster_inventory:J}))},[t,r]);const h=g.useCallback((a,u)=>{r(p=>{const m=[...p.disaster_inventory];return m[a]={...m[a],...u(m[a])},{...p,disaster_inventory:m}})},[r]),d=(a,u,p)=>h(a,m=>{const y=[...m.categories];return y[u]={...y[u],...p(y[u])},{categories:y}}),b=(a,u,p,m,y)=>d(a,u,N=>{const f=[...N.rows];return f[p]={...f[p],[m]:y},{rows:f}}),c=()=>{r(a=>({...a,disaster_inventory:[...a.disaster_inventory,{hazard:"New Hazard",categories:J[0].categories.map(u=>({...u,rows:u.rows.map(p=>({...p}))}))}]})),j.success("New hazard added!")},x=a=>{r(u=>({...u,disaster_inventory:u.disaster_inventory.filter((p,m)=>m!==a)})),j.error("Hazard removed!")},n=a=>{h(a,u=>({categories:[...u.categories,{type:"New Category",rows:[{...w}]}]})),j.success("New category added!")},s=(a,u)=>{h(a,p=>({categories:p.categories.filter((m,y)=>y!==u)})),j.error("Category removed!")},i=(a,u)=>d(a,u,p=>({rows:[...p.rows,{...w}]})),l=(a,u,p)=>d(a,u,m=>({rows:m.rows.filter((y,N)=>N!==p)}));return e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-bold mb-4 mt-4",children:"4.2 Inventory of Assets at Risk during Hazards and Disasters"}),(o=t.disaster_inventory)==null?void 0:o.map((a,u)=>{var p;return e.jsxs("div",{className:"mb-10 border-2 border-purple-300 rounded-xl p-5 bg-purple-50 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("input",{type:"text",value:a.hazard,onChange:m=>h(u,()=>({hazard:m.target.value})),className:"text-lg font-semibold text-purple-700 bg-transparent border-b border-purple-300 focus:outline-none px-1",placeholder:"Enter Hazard"}),e.jsx("div",{children:e.jsx("button",{onClick:()=>x(u),className:"ml-2 px-3 py-1 rounded bg-red-500 text-white text-xs",children:"✕"})})]}),(p=a.categories)==null?void 0:p.map((m,y)=>e.jsxs("div",{className:"mb-6 border rounded-lg p-4 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("input",{type:"text",value:m.type,onChange:N=>d(u,y,()=>({type:N.target.value})),className:"font-medium text-gray-700 bg-transparent border-b border-gray-300 focus:outline-none px-1",placeholder:"Enter Category"}),e.jsx("button",{onClick:()=>s(u,y),className:"ml-2 px-2 py-1 rounded bg-red-400 text-white text-xs",children:"✕"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Item"}),e.jsx("th",{className:"border px-2 py-1",children:"Total"}),e.jsxs("th",{className:"border px-2 py-1",children:["Percentage or no. at Risk ",e.jsx("br",{})," (or will be affected)"]}),e.jsx("th",{className:"border px-2 py-1",children:"Location"}),e.jsx("th",{className:"border px-2 py-1"})]})}),e.jsx("tbody",{children:m.rows.map((N,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:N.item,onChange:R=>b(u,y,f,"item",R.target.value),className:"border w-full px-2 py-1 text-xs text-center rounded",placeholder:"Enter Item"})}),["total","percent","location"].map((R,D)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:N[R],onChange:A=>{let S=A.target.value;R==="percent"&&(S=S.replace(/%/g,""),S!==""&&(S=S+"%")),b(u,y,f,R,S)},className:"border w-full px-2 py-1 text-xs text-center rounded"})},D)),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-600 hover:bg-red-300 hover:text-white",onClick:()=>l(u,y,f),children:"✕"})})]},f))})]})}),e.jsx("button",{onClick:()=>i(u,y),className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Item"})]},y)),e.jsx("button",{onClick:()=>n(u),className:"mt-2 px-3 py-1 bg-green-500 text-white rounded text-xs",children:"+ Add Category"})]},u)}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded text-sm",children:"+ Add Hazard"})]})},Ze=()=>{const{craData:t,setCraData:r}=g.useContext(v),h={name:"",families:"",individuals:"",ownerGovt:!1,ownerPrivate:!1,inspectedYes:!1,inspectedNo:!1,mouYes:!1,mouNo:!1},d=t.evacuation_list||[h],b=l=>{r({...t,evacuation_list:l})},c=(l,o,a)=>{const u=[...d];a.forEach(p=>u[l][p]=!1),u[l][o]=!0,b(u)},x=(l,o,a)=>{const u=[...d];u[l][o]=a,b(u)},n=()=>{b([...d,{...h}])},s=l=>{const o=[...d];o.splice(l,1),b(o)},i=(l,o)=>e.jsx("button",{onClick:o,className:"w-full flex items-center justify-center hover:bg-gray-100 p-1 rounded text-center",children:l?e.jsx(B,{className:"w-4 h-4 text-green-600"}):e.jsx(ke,{className:"w-4 h-4 text-gray-400"})});return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"text-md font-bold mb-4 mt-4",children:"4.3 Inventory of Evacuation Centers / Isolation Facilities"}),e.jsxs("table",{className:"w-full border border-gray-300 text-sm text-center",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Name of Evacuation Center / Isolation Facility"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Capacity"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Owner"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Inspected by an Engineer"}),e.jsx("th",{className:"border px-2 py-1",colSpan:2,children:"Presence of Memorandum of Understanding"}),e.jsx("th",{className:"border px-2 py-1"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Gov’t"}),e.jsx("th",{className:"border px-2 py-1",children:"Private"}),e.jsx("th",{className:"border px-2 py-1",children:"Yes"}),e.jsx("th",{className:"border px-2 py-1",children:"No"}),e.jsx("th",{className:"border px-2 py-1",children:"Yes"}),e.jsx("th",{className:"border px-2 py-1",children:"No"}),e.jsx("th",{className:"border px-2 py-1"})]})]}),e.jsx("tbody",{children:d.map((l,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:l.name,onChange:a=>x(o,"name",a.target.value),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Enter Facility"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:l.families,onChange:a=>x(o,"families",a.target.value),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Families"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:l.individuals,onChange:a=>x(o,"individuals",a.target.value),className:"w-full border px-1 py-0.5 text-sm text-center",placeholder:"Individuals"})}),e.jsx("td",{className:"border",children:i(l.ownerGovt,()=>c(o,"ownerGovt",["ownerGovt","ownerPrivate"]))}),e.jsx("td",{className:"border",children:i(l.ownerPrivate,()=>c(o,"ownerPrivate",["ownerGovt","ownerPrivate"]))}),e.jsx("td",{className:"border",children:i(l.inspectedYes,()=>c(o,"inspectedYes",["inspectedYes","inspectedNo"]))}),e.jsx("td",{className:"border",children:i(l.inspectedNo,()=>c(o,"inspectedNo",["inspectedYes","inspectedNo"]))}),e.jsx("td",{className:"border",children:i(l.mouYes,()=>c(o,"mouYes",["mouYes","mouNo"]))}),e.jsx("td",{className:"border",children:i(l.mouNo,()=>c(o,"mouNo",["mouYes","mouNo"]))}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>s(o),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},o))})]}),e.jsxs("button",{onClick:n,className:"mt-2 flex items-center px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:[e.jsx(k,{className:"w-4 h-4 mr-1"})," Add Row"]})]})},et=t=>{if(t.probability===""||t.effect===""||t.management==="")return"";const r=(Number(t.probability)+Number(t.effect)+Number(t.management))/3;return parseFloat(r.toFixed(3))};function tt({hazards:t,updateField:r,addHazard:h,removeHazard:d}){const b=t.map((c,x)=>({...c,index:x,average:et(c)})).sort((c,x)=>(x.average||0)-(c.average||0)).map((c,x)=>({...c,rank:c.average?x+1:""}));return e.jsxs("div",{className:"overflow-x-auto border rounded-lg shadow-sm mb-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 border-b text-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Legend"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Probability"}),e.jsx("p",{children:"1 – Most Unlikely"}),e.jsx("p",{children:"2 – Low Probability"}),e.jsx("p",{children:"3 – Perhaps"}),e.jsx("p",{children:"4 – High Probability"}),e.jsx("p",{children:"5 – Almost Certain"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Effect"}),e.jsx("p",{children:"1 – Negligible"}),e.jsx("p",{children:"2 – Low Impact"}),e.jsx("p",{children:"3 – Maintain Impact"}),e.jsx("p",{children:"4 – High Impact"}),e.jsx("p",{children:"5 – Devastating"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Management"}),e.jsx("p",{children:"1 – Most Manageable"}),e.jsx("p",{children:"2 – Manageable"}),e.jsx("p",{children:"3 – Most Extensive"}),e.jsx("p",{children:"4 – Most Frequent"}),e.jsx("p",{children:"5 – Most Severe"})]})]})]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1",children:"Hazard / Risk"}),e.jsx("th",{className:"border px-2 py-1",children:"Probability"}),e.jsx("th",{className:"border px-2 py-1",children:"Effect"}),e.jsx("th",{className:"border px-2 py-1",children:"Management"}),e.jsx("th",{className:"border px-2 py-1",children:"Basis"}),e.jsx("th",{className:"border px-2 py-1",children:"Average"}),e.jsx("th",{className:"border px-2 py-1",children:"Ranking"}),e.jsx("th",{className:"border px-2 py-1"})]})}),e.jsx("tbody",{children:b.map(c=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.hazard,onChange:x=>r(c.index,"hazard",x.target.value)})}),["probability","effect","management"].map(x=>e.jsx("td",{className:"border px-2 py-1",children:e.jsxs("select",{className:"w-full border p-1",value:c[x],onChange:n=>r(c.index,x,n.target.value),children:[e.jsx("option",{value:"",children:"Select"}),[1,2,3,4,5].map(n=>e.jsx("option",{value:n,children:n},n))]})},x)),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{className:"w-full border p-1",value:c.basis,onChange:x=>r(c.index,"basis",x.target.value)})}),e.jsx("td",{className:"border px-2 py-1 text-center bg-gray-50 font-semibold",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.average,onChange:x=>r(c.index,"average",x.target.value)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:c.rank}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>d(c.index),children:"✕"})})]},c.index))})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:underline",onClick:h,children:"+ Add new row"})]})}const st=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{(!t.hazards||t.hazards.length===0)&&r(c=>({...c,hazards:[{hazard:"",probability:"",effect:"",management:"",basis:""}]}))},[t,r]);const h=(c,x,n)=>{const s=[...t.hazards];s[c][x]=x==="probability"||x==="effect"||x==="management"?n===""?"":Number(n):n,r(i=>({...i,hazards:s}))},d=()=>{const c=[...t.hazards||[]];c.push({hazard:"",probability:"",effect:"",management:"",basis:""}),r(x=>({...x,hazards:c})),j.success("Hazard added!")},b=c=>{var s;const x=[...t.hazards],n=((s=x[c])==null?void 0:s.hazard)||"Hazard";x.splice(c,1),r(i=>({...i,hazards:x})),j.error(`${n} removed!`)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(C,{title:"2. Identifying Possible Risks or Dangers that could affect the Barangay",children:[e.jsx(tt,{hazards:t.hazards||[],updateField:h,addHazard:d,removeHazard:b}),e.jsx(ze,{})]}),e.jsx(C,{title:"3. Development an exposure database of those that can be directly affected by risks and hazards",children:e.jsx(Ke,{})}),e.jsxs(C,{title:"4. Effects of Hazards or Disasters",children:[e.jsx(Je,{}),e.jsx(Xe,{})]}),e.jsx(C,{title:`5. List of Designated Center and Temporary Isolation Facilities in the
            Barangay and City (whether owned by the goverment or private)`,children:e.jsx(Ze,{})})]})},L=["With Disability","Pregnant Women","Number of Families","Number of Individuals","0-6 months","7 mos - 2 yrs","3-5 yrs","6-12 yrs","13-17 yrs","18-59 yrs","60+ yrs","Physical Health","Mental Health"],z=["Number of Casualties","Deaths","Injured","Missing"],O=[{category:"Agriculture",defaultDescriptions:["Farming (extent of damage in land area or worth of damage)"]},{category:"Fishing",defaultDescriptions:["Fishing Equipment (quantity or worth of damage)","Fishing Boats (damaged or lost)"]}],G=[{defaultDescriptions:["Transportation Facilities (extent of damage or worth of damage)"]},{category:"Roads",defaultDescriptions:["National (Number of impassable road or worth of damage)","Provincial (Number of impassable road or worth of damage)","City (Number of impassable road or worth of damage)","Barangay (Number of impassable road or worth of damage)"]},{category:"Electric and Water Supply",defaultDescriptions:["Electric Supply (Number of households affected)","Water Supply (Number of households affected)"]},{category:"Bridges",defaultDescriptions:["Bailey (Number of impassable bridges or worth of damages)","Concrete (Number of impassable bridges or worth of damages)","Wooden (Number of impassable bridges or worth of damages)","Railway (Number of impassable bridges or worth of damages)"]},{category:"Communication Facilities",defaultDescriptions:["PLDT (Number of damaged lines or worth of damages)","BAYANTEL (Number of damaged lines or worth of damages)","Cell Sites (Number of damaged lines or worth of damages)","Radio (Number of damaged lines or worth of damages)","Repeaters (Number of damaged lines or worth of damages)"]}],q=["Livestock (quantity or value)","Farm animals (quantity)","Poultry and Fowl (quantity)","Agriculture/Farm Inputs"],rt=["Totally Damaged (quantity or worth of damage)","Partially Damaged (quantity or worth of damage)"],$=["Houses","Schools","Hospitals","Health Center","Government Offices","Public Markets","Flood Control","Commercial Facilities"].map(t=>({category:t,defaultDescriptions:[...rt]})),X=()=>({disaster_name:"",year:"",population:L.map(t=>({category:t,value:"",source:""})),impacts:z.map(t=>({effect_type:t,value:"",source:""})),property:O.map(t=>({category:t.category,descriptions:t.defaultDescriptions.map(r=>({description:r,value:"",source:""}))})),structure:$.map(t=>({category:t.category,descriptions:t.defaultDescriptions.map(r=>({description:r,value:"",source:""}))})),agriculture:q.map(t=>({description:t,value:"",source:""})),lifelines:G.map(t=>({category:t.category||t.defaultDescriptions,descriptions:Array.isArray(t.defaultDescriptions)?t.defaultDescriptions.map(r=>({description:r,value:"",source:""})):[{description:t.defaultDescriptions,value:"",source:""}]}))}),at=({calamities:t,updateCell:r})=>e.jsxs("table",{className:"w-full border text-sm mt-4",children:[e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[200px]",children:"Calamity/Disaster"}),t.map((h,d)=>e.jsxs(_.Fragment,{children:[e.jsx("th",{className:"border text-center",children:e.jsx("input",{type:"text",placeholder:"Disaster Name",value:h.disaster_name,className:"border w-full text-center font-bold",onChange:b=>r(d,"disaster_name",b.target.value)})}),e.jsx("th",{className:"border text-center",children:"Source of Information"})]},d))]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[200px]",children:"Year"}),t.map((h,d)=>e.jsxs(_.Fragment,{children:[e.jsx("th",{className:"border text-center",children:e.jsx("input",{type:"text",placeholder:"e.g. 2020 or 2020-2026",value:h.year,className:"border text-center w-full",onChange:b=>r(d,"year",b.target.value)})}),e.jsx("th",{className:"border text-center",children:"Barangay"})]},d))]}),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"POPULATION"})}),e.jsx("tr",{children:e.jsx("th",{className:"border text-center w-[200px]",children:"Affected Population"})})]}),e.jsxs("tbody",{children:[L.map((h,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:h}),t.map((b,c)=>{var n;const x=((n=b.population)==null?void 0:n[d])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.value,onChange:s=>r(c,"population",s.target.value,d,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.source,onChange:s=>r(c,"population",s.target.value,d,null,"source")})})]},c)})]},d)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"EFFECTS/IMPACTS OF DISASTER"})}),z.map((h,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:h}),t.map((b,c)=>{var n;const x=((n=b.impacts)==null?void 0:n[d])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.value,onChange:s=>r(c,"impacts",s.target.value,d,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.source,onChange:s=>r(c,"impacts",s.target.value,d,null,"source")})})]},c)})]},`impact-${d}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"DAMAGE TO PROPERTY"})}),O.map((h,d)=>e.jsxs(_.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:h.category})}),h.defaultDescriptions.map((b,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((x,n)=>{var i,l,o;const s=((o=(l=(i=x.property)==null?void 0:i[d])==null?void 0:l.descriptions)==null?void 0:o[c])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:a=>r(n,"property",a.target.value,d,c,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:a=>r(n,"property",a.target.value,d,c,"source")})})]},`prop-${n}-${d}-${c}`)})]},`desc-${d}-${c}`))]},`category-${d}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"AGRICULTURE"})}),q.map((h,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:h}),t.map((b,c)=>{var n;const x=((n=b.agriculture)==null?void 0:n[d])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.value,onChange:s=>r(c,"agriculture",s.target.value,d,null,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:x.source,onChange:s=>r(c,"agriculture",s.target.value,d,null,"source")})})]},c)})]},`agri-${d}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"DAMAGE PROPERTIES (STRUCTURES)"})}),$.map((h,d)=>e.jsxs(_.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:h.category})}),h.defaultDescriptions.map((b,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((x,n)=>{var i,l,o;const s=((o=(l=(i=x.structure)==null?void 0:i[d])==null?void 0:l.descriptions)==null?void 0:o[c])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:a=>r(n,"structure",a.target.value,d,c,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:a=>r(n,"structure",a.target.value,d,c,"source")})})]},`struct-${n}-${d}-${c}`)})]},`structure-${d}-${c}`))]},`structure-${d}`)),e.jsx("tr",{children:e.jsx("th",{className:"border text-center font-bold bg-gray-100",colSpan:1+t.length*2,children:"LIFELINES"})}),G.map((h,d)=>e.jsxs(_.Fragment,{children:[e.jsx("tr",{children:e.jsx("th",{className:"border text-left font-bold bg-gray-50 px-2",colSpan:1+t.length*2,children:h.category||"General Lifeline"})}),h.defaultDescriptions.map((b,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:b}),t.map((x,n)=>{var i,l,o;const s=((o=(l=(i=x.lifelines)==null?void 0:i[d])==null?void 0:l.descriptions)==null?void 0:o[c])||{value:"",source:""};return e.jsxs(_.Fragment,{children:[e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.value,onChange:a=>r(n,"lifelines",a.target.value,d,c,"value")})}),e.jsx("td",{className:"border text-center px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border text-center",value:s.source,onChange:a=>r(n,"lifelines",a.target.value,d,c,"source")})})]},`life-${n}-${d}-${c}`)})]},`life-${d}-${c}`))]},`life-${d}`))]})]});function nt(){const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{r(c=>{var x;return{...c,calamities:(x=c.calamities)!=null&&x.length?c.calamities.map(n=>{var s,i,l,o,a,u;return{...n,population:(s=n.population)!=null&&s.length?n.population:L.map(p=>({category:p,value:"",source:""})),impacts:(i=n.impacts)!=null&&i.length?n.impacts:z.map(p=>({effect_type:p,value:"",source:""})),property:(l=n.property)!=null&&l.length?n.property:O.map(p=>({category:p.category,descriptions:p.defaultDescriptions.map(m=>({description:m,value:"",source:""}))})),structure:(o=n.structure)!=null&&o.length?n.structure:$.map(p=>({category:p.category,descriptions:p.defaultDescriptions.map(m=>({description:m,value:"",source:""}))})),agriculture:(a=n.agriculture)!=null&&a.length?n.agriculture:q.map(p=>({description:p,value:"",source:""})),lifelines:(u=n.lifelines)!=null&&u.length?n.lifelines:G.map(p=>({category:p.category||"General",descriptions:(Array.isArray(p.defaultDescriptions)?p.defaultDescriptions:[p.defaultDescriptions]).map(m=>({description:m,value:"",source:""}))}))}}):[X()]}})},[r]);const h=g.useCallback(()=>{r(c=>({...c,calamities:[...c.calamities,X()]})),j.success("New calamity added!")},[r]),d=g.useCallback(()=>{r(c=>c.calamities.length<=1?c:{...c,calamities:c.calamities.slice(0,-1)}),j.error("Last calamity removed!")},[r]),b=g.useCallback((c,x,n,s=null,i=null,l=null)=>{r(o=>{const a=[...o.calamities];return["population","impacts","agriculture"].includes(x)?s!==null&&l&&(a[c]={...a[c],[x]:a[c][x].map((u,p)=>p===s?{...u,[l]:n}:u)}):["property","structure","lifelines"].includes(x)?s!==null&&i!==null&&l&&(a[c]={...a[c],[x]:a[c][x].map((u,p)=>p===s?{...u,descriptions:u.descriptions.map((m,y)=>y===i?{...m,[l]:n}:m)}:u)}):a[c]={...a[c],[x]:n},{...o,calamities:a}})},[r]);return e.jsx("div",{children:e.jsxs(C,{title:"1. Identify Calamities or Disasters in the Past Years and their Impact to the Community",children:[e.jsxs("div",{className:"flex justify-end mt-0 gap-2",children:[e.jsxs("button",{onClick:h,className:"group relative flex items-center justify-center w-8 h-8 bg-blue-300 text-white rounded-full shadow hover:bg-blue-700 transition",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"absolute top-12 opacity-0 group-hover:opacity-100 transition bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:"Add Calamity"})]}),e.jsxs("button",{onClick:d,className:"group relative flex items-center justify-center w-8 h-8 bg-red-300 text-white rounded-full shadow hover:bg-red-700 transition",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"absolute top-12 opacity-0 group-hover:opacity-100 transition bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:"Remove Calamity"})]})]}),e.jsx(at,{calamities:t.calamities||[],updateCell:b})]})})}const Z={totalFamilies:"",totalIndividuals:"",populationAtRiskFamilies:"",populationAtRiskIndividuals:"",evacuationCenterPlanA:"",personsCanBeAccommodatedPlanAFamilies:"",personsCanBeAccommodatedPlanAIndividuals:"",personsCannotBeAccommodatedPlanAFamilies:"",personsCannotBeAccommodatedPlanAIndividuals:"",evacuationCenterPlanB:"",personsCannotBeAccommodatedPlanABFamilies:"",personsCannotBeAccommodatedPlanABIndividuals:"",remarks:""},lt=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]);g.useEffect(()=>{t.evacuation_center_inventory||r({...t,evacuation_center_inventory:[{...Z}]})},[]);const d=t.evacuation_center_inventory||[],b=(s,i,l)=>{const o=[...d];o[s]={...o[s],[i]:l},r({...t,evacuation_center_inventory:o})},c=()=>{r({...t,evacuation_center_inventory:[...d,{...Z}]}),j.success("Row added successfully!")},x=s=>{r({...t,evacuation_center_inventory:d.filter((i,l)=>l!==s)}),j.error("Row removed!")},n=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{h.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[d]),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Purok"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Total Population"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Population at Risk"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Name of Evacuation Center (Plan A) Government-owned"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who can be accommodated"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who cannot be accommodated"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1",children:"Name of Evacuation Center (Plan B) Privately-owned"}),e.jsx("th",{colSpan:2,className:"border px-2 py-1",children:"Number of Persons who cannot be accommodated at Plan A & B"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1 w-[110px]",children:"Remarks"}),e.jsx("th",{rowSpan:2,className:"border px-2 py-1 w-[40px]"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"})]})]}),e.jsx("tbody",{children:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),["totalFamilies","totalIndividuals","populationAtRiskFamilies","populationAtRiskIndividuals","evacuationCenterPlanA","personsCanBeAccommodatedPlanAFamilies","personsCanBeAccommodatedPlanAIndividuals","personsCannotBeAccommodatedPlanAFamilies","personsCannotBeAccommodatedPlanAIndividuals","evacuationCenterPlanB","personsCannotBeAccommodatedPlanABFamilies","personsCannotBeAccommodatedPlanABIndividuals","remarks"].map((l,o)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:a=>h.current[i*13+o]=a,rows:1,value:s[l],onChange:a=>{b(i,l,a.target.value),n(a)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden text-xs"})},l)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>x(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsx("button",{onClick:c,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},me={riskLevel:"",purok:"",totalFamilies:"",totalIndividuals:"",atRiskFamilies:"",atRiskIndividuals:"",safeEvacuationArea:""},ee=()=>Array.from({length:7},(t,r)=>({...me,purok:(r+1).toString()})),ot=({disaster:t,updateDisaster:r,removeDisaster:h})=>{const d=(n,s,i)=>{const l=[...t.rows];l[n]={...l[n],[s]:i},r({...t,rows:l})},b=()=>{const n=(t.rows.length+1).toString();r({...t,rows:[...t.rows,{...me,purok:n}]})},c=n=>{r({...t,rows:t.rows.filter((s,i)=>i!==n)})},x=t.rows.reduce((n,s)=>(n.families+=Number(s.totalFamilies)||0,n.individuals+=Number(s.totalIndividuals)||0,n.atRiskFamilies+=Number(s.atRiskFamilies)||0,n.atRiskIndividuals+=Number(s.atRiskIndividuals)||0,n),{families:0,individuals:0,atRiskFamilies:0,atRiskIndividuals:0});return e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("input",{type:"text",value:t.name,onChange:n=>r({...t,name:n.target.value}),className:"text-md font-bold bg-transparent border-none focus:outline-none w-full"}),e.jsx("button",{className:"ml-3 text-red-500 text-xs hover:underline whitespace-nowrap",onClick:h,children:"Remove Disaster"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1 w-32",children:"Risk Level"}),e.jsx("th",{className:"border px-2 py-1",children:"Purok"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Total Population"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"At-Risk Population"}),e.jsx("th",{className:"border px-2 py-1",children:"Safe Evacuation Area"}),e.jsx("th",{className:"border px-2 py-1 text-center"})]}),e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1",children:"Families"}),e.jsx("th",{className:"border px-2 py-1",children:"Individuals"}),e.jsx("th",{className:"border px-2 py-1"}),e.jsx("th",{className:"border px-2 py-1"})]})]}),e.jsxs("tbody",{children:[t.rows.map((n,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsxs("select",{value:n.riskLevel,onChange:i=>d(s,"riskLevel",i.target.value),className:"border w-full px-2 py-1 text-xs text-center rounded",children:[e.jsx("option",{value:"",children:"--Select--"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:n.purok}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:n.totalFamilies,onChange:i=>d(s,"totalFamilies",i.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:n.totalIndividuals,onChange:i=>d(s,"totalIndividuals",i.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:n.atRiskFamilies,onChange:i=>d(s,"atRiskFamilies",i.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",value:n.atRiskIndividuals,onChange:i=>d(s,"atRiskIndividuals",i.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"text",value:n.safeEvacuationArea,onChange:i=>d(s,"safeEvacuationArea",i.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>c(s),children:"✕"})})]},s)),e.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x.families}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x.individuals}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x.atRiskFamilies}),e.jsx("td",{className:"border px-2 py-1 text-center",children:x.atRiskIndividuals}),e.jsx("td",{className:"border px-2 py-1 text-center"}),e.jsx("td",{className:"border px-2 py-1 text-center"})]})]})]})}),e.jsx("button",{onClick:b,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},it=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=()=>{const c={id:Date.now(),name:"New Disaster",rows:ee()};r({...t,affected_areas:[...t.affected_areas||[],c]})},d=(c,x)=>{r({...t,affected_areas:t.affected_areas.map(n=>n.id===c?x:n)})},b=c=>{r({...t,affected_areas:t.affected_areas.filter(x=>x.id!==c)})};return _.useEffect(()=>{(!t.affected_areas||t.affected_areas.length===0)&&r({...t,affected_areas:[{id:Date.now(),name:"Typhoon",rows:ee()}]})},[]),e.jsxs("div",{children:[(t.affected_areas||[]).map(c=>e.jsx(ot,{disaster:c,updateDisaster:x=>d(c.id,x),removeDisaster:()=>b(c.id)},c.id)),e.jsx("button",{onClick:h,className:"mt-3 px-3 py-1 bg-green-500 text-white rounded text-xs",children:"+ Add Disaster"})]})},te={type:"",evacuation:"",origin:"",items:""},ct=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{t.livelihood_evacuation||r({...t,livelihood_evacuation:[te]})},[]);const h=t.livelihood_evacuation||[],d=(x,n,s)=>{const i=[...h];i[x]={...i[x],[n]:s},r({...t,livelihood_evacuation:i})},b=()=>{r({...t,livelihood_evacuation:[...h,{...te}]}),j.success("Row added successfully!")},c=x=>{r({...t,livelihood_evacuation:h.filter((n,s)=>s!==x)}),j.error("Row removed!")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Livelihood and Evacuation"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Type"}),e.jsx("th",{className:"border px-2 py-1",children:"Evacuation"}),e.jsx("th",{className:"border px-2 py-1",children:"Origin"}),e.jsx("th",{className:"border px-2 py-1",children:"Items"}),e.jsx("th",{className:"border px-2 py-1 text-center"})]})}),e.jsx("tbody",{children:h.map((x,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:x.type,onChange:s=>d(n,"type",s.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:x.evacuation,onChange:s=>d(n,"evacuation",s.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:x.origin,onChange:s=>d(n,"origin",s.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",value:x.items,onChange:s=>d(n,"items",s.target.value),className:"border w-full px-2 py-1 text-xs text-center"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>c(n),children:"✕"})})]},n))})]})}),e.jsx("button",{onClick:b,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},se={item:"",quantity:"",remarks:""},dt=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{t.food_inventory||r({...t,food_inventory:[se]})},[]);const h=t.food_inventory||[],d=(x,n,s)=>{const i=[...h];i[x]={...i[x],[n]:s},r({...t,food_inventory:i})},b=()=>{r({...t,food_inventory:[...h,{...se}]}),j.success("Row added successfully!")},c=x=>{r({...t,food_inventory:h.filter((n,s)=>s!==x)}),j.error("Row removed!")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Food Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Item"}),e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1 whitespace-nowrap",children:"Remarks"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:h.map((x,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:x.item,onChange:s=>d(n,"item",s.target.value),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"}})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:x.quantity,onChange:s=>d(n,"quantity",s.target.value),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"}})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{value:x.remarks,onChange:s=>d(n,"remarks",s.target.value),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden",rows:1,onInput:s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"}})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>c(n),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-400 hover:bg-gray-200",children:"✕"})})]},n))})]})}),e.jsx("button",{onClick:b,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},re={evacuationCenter:"",typeOfGoods:"",quantity:"",unit:"",beneficiaries:"",address:""},pt=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{t.relief_goods||r({...t,relief_goods:[re]})},[]);const h=t.relief_goods||[],d=(n,s,i)=>{const l=[...h];l[n]={...l[n],[s]:i},r({...t,relief_goods:l})},b=()=>{r({...t,relief_goods:[...h,{...re}]}),j.success("Row added successfully!")},c=n=>{if(h.length===1){j.error("At least one row is required!");return}r({...t,relief_goods:h.filter((s,i)=>i!==n)}),j.error("Row removed!")},x=n=>{n&&(n.style.height="auto",n.style.height=n.scrollHeight+"px")};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Relief Goods (Food and Non-Food Items)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Name of Evacuation Center"}),e.jsx("th",{className:"border px-2 py-1",children:"Type of Relief Goods"}),e.jsx("th",{className:"border px-2 py-1",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1",children:"Unit"}),e.jsx("th",{className:"border px-2 py-1",children:"Name of Beneficiaries"}),e.jsx("th",{className:"border px-2 py-1",children:"Beneficiaries’ Address"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:h.map((n,s)=>e.jsxs("tr",{children:[["evacuationCenter","typeOfGoods","quantity","unit","beneficiaries","address"].map(i=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{rows:1,value:n[i],onChange:l=>{d(s,i,l.target.value),x(l.target)},ref:l=>x(l),className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden"})},i)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>c(s),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},s))})]})}),e.jsx("button",{onClick:b,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},ut=()=>e.jsxs("div",{children:[e.jsx(C,{title:`6. Inventory of Evacuation Centers where Families can Relocate
                or Stay During Disasters`,children:e.jsx(lt,{})}),e.jsx(C,{title:`7. List of Places/Areas where affected residents can evacuate
            during times of impending or current disaster`,children:e.jsx(it,{})}),e.jsx(C,{title:"8. List of Places/Areas where Sources of Livelihood can be evacuated",children:e.jsx(ct,{})}),e.jsx(C,{title:"9. Inventory of Prepositioned Food and Non-food Items",children:e.jsx(dt,{})}),e.jsx(C,{title:`10. List of Designated Evacuation Centers that will serve as Distribution
            Sites for Relief Goods(Food and Non-Food Items)`,children:e.jsx(pt,{})})]}),ae={process:"",origin:"",remarks:""},xt=()=>{const{craData:t,setCraData:r}=g.useContext(v);g.useEffect(()=>{t.distribution_process||r({...t,distribution_process:[ae]})},[]);const h=t.distribution_process||[],d=n=>{n&&(n.style.height="auto",n.style.height=n.scrollHeight+"px")},b=(n,s,i)=>{const l=[...h];l[n]={...l[n],[s]:i},r({...t,distribution_process:l})},c=()=>{r({...t,distribution_process:[...h,{...ae}]}),j.success("Row added!")},x=n=>{if(h.length===1){j.error("At least one row is required!");return}r({...t,distribution_process:h.filter((s,i)=>i!==n)}),j.success("Row removed!")};return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Distribution Process"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-400 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Distribution Process"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Origin of Relief Goods"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-1/3",children:"Challenge / Status / Remarks"}),e.jsx("th",{className:"border border-gray-400 px-2 py-1 w-[100px]"})]})}),e.jsx("tbody",{children:h.map((n,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:n.process,onChange:i=>b(s,"process",i.target.value),ref:d,onInput:i=>d(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter distribution process"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:n.origin,onChange:i=>b(s,"origin",i.target.value),ref:d,onInput:i=>d(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter origin of relief goods"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1",children:e.jsx("textarea",{value:n.remarks,onChange:i=>b(s,"remarks",i.target.value),ref:d,onInput:i=>d(i.target),className:"w-full resize-none overflow-hidden border rounded p-1",rows:1,placeholder:"Enter remarks"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center",children:e.jsx("button",{type:"button",onClick:()=>x(s),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},s))})]})}),e.jsx("button",{type:"button",onClick:c,className:"mt-3 bg-blue-500 text-white px-4 py-1 rounded text-xs",children:"+ Add Row"})]})},ht=["Training on RA 10121 (Philippine Disaster Risk Reduction and Management Act)","Training on RA 10821 (Children’s Emergency Relief and Protection Act)","Training on Child Protection in Emergencies","Training on Pre- Disaster Risk Assessment","Training on the Protocol for Management of the Dead and Missing","Training on Camp Management","Training on Incident Command System","Training on Psychological First Aid","First Aid at Basic Life Support Training","Basic Search and Rescue Training","Training on Psychological First Aid","Training on Mental Health and Psychosocial Support","Community-Based Reduction and Management (CBDRRM) Training","Mental Health and Psychosocial Support (MHPSS) Training","Training on the Conduct of Simulation/Drills for Priority Hazards","Training on Rapid Damage Assessment and Needs Analysis (RDANA)","Training on Minimum Health Protocols","Training on Contact Tracing and Reporting","Training on Public Service Continuity","Training on Basic Disease Surveillance and Reporting","QAS for BDRRM and Committee training workshop"],ne={title:"",applies:"",duration:"",agency:"",dates:"",participants:"",names:""},mt=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]);g.useEffect(()=>{t.trainings_inventory||r({...t,trainings_inventory:ht.map(s=>({...ne,title:s}))})},[]);const d=t.trainings_inventory||[],b=(s,i,l)=>{const o=[...d];o[s]={...o[s],[i]:l},r({...t,trainings_inventory:o})},c=()=>{r({...t,trainings_inventory:[...d,{...ne}]}),j.success("Row added successfully!")},x=s=>{r({...t,trainings_inventory:d.filter((i,l)=>l!==s)}),j.error("Row removed!")},n=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{h.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[d]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Trainings Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Title of the training"}),e.jsx("th",{className:"border px-2 py-1 w-[150px]",children:"Put a check if the item applies (✓) and cross (x) if it does not"}),e.jsx("th",{className:"border px-2 py-1",children:"Duration of training"}),e.jsx("th",{className:"border px-2 py-1 w-[180px]",children:"Agency or organization that provided the training"}),e.jsx("th",{className:"border px-2 py-1",children:"Inclusive dates of the training"}),e.jsx("th",{className:"border px-2 py-1",children:"Number of participants"}),e.jsx("th",{className:"border px-2 py-1",children:"Name of persons attended/ participated"}),e.jsx("th",{className:"border px-2 py-1 w-[40px] text-center"})]})}),e.jsx("tbody",{children:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:l=>h.current[i*6+0]=l,rows:1,value:s.title,onChange:l=>{b(i,"title",l.target.value),n(l)},className:"border w-full px-2 py-1 text-md text-left resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1 w-[80px]",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(i,"applies","yes"),className:`p-1 rounded-full ${s.applies==="yes"?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(B,{size:14})}),e.jsx("button",{onClick:()=>b(i,"applies","no"),className:`p-1 rounded-full ${s.applies==="no"?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(H,{size:14})})]})}),["duration","agency","dates","participants","names"].map((l,o)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:a=>h.current[i*6+(o+1)]=a,rows:1,value:s[l],onChange:a=>{b(i,l,a.target.value),n(a)},className:"border w-full px-2 py-1 text-md text-center resize-none overflow-hidden"})},l)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>x(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsx("button",{onClick:c,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},bt=["Spine Board","Axe","Gasoline or Fuel","First Aid or Emergency Kit","Hand-held Radio","Helmet or hard hat","Batteries","Portable Generator or alternative source of electricity (ex: solar panel)","Boots","Rope","Search Light","Flash Light","Megaphone","Face Shield","Alcohol","Thermal scanner","Chainsaw","Cleaning materials (Ex: broom, dustpan, rugs, etc.)","Life Vest","Reflectorized Life Vest","Personal Protective Equipment (PPE)","Shovel"],le={item:"",status:"",quantity:"",location:"",remarks:""},yt=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]);g.useEffect(()=>{t.equipment_inventory||r({...t,equipment_inventory:bt.map(s=>({...le,item:s}))})},[]);const d=t.equipment_inventory||[],b=(s,i,l)=>{const o=[...d];o[s]={...o[s],[i]:l},r({...t,equipment_inventory:o})},c=()=>{r({...t,equipment_inventory:[...d,{...le}]}),j.success("Row added successfully!")},x=s=>{r({...t,equipment_inventory:d.filter((i,l)=>l!==s)}),j.error("Row removed!")},n=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{h.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[d]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Equipment Inventory"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"Equipment"}),e.jsx("th",{className:"border px-2 py-1 w-[150px]",children:"Put a check (✓) if the items are found in the barangay and cross (x) if they are not"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Quantity"}),e.jsx("th",{className:"border px-2 py-1",children:"Location of the equipment"}),e.jsx("th",{className:"border px-2 py-1",children:"Remarks"}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:l=>h.current[i*5]=l,rows:1,value:s.item,onChange:l=>{b(i,"item",l.target.value),n(l)},className:"border w-full px-2 py-1 text-left resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1 w-[80px]",children:e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(i,"status","yes"),className:`p-1 rounded-full ${s.status==="yes"?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(B,{size:14})}),e.jsx("button",{onClick:()=>b(i,"status","no"),className:`p-1 rounded-full ${s.status==="no"?"bg-red-500 text-white":"bg-gray-200 text-gray-500"}`,children:e.jsx(H,{size:14})})]})}),["quantity","location","remarks"].map((l,o)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:a=>h.current[i*5+(o+1)]=a,rows:1,value:s[l],onChange:a=>{b(i,l,a.target.value),n(a)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden",placeholder:l.charAt(0).toUpperCase()+l.slice(1)})},l)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>x(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsx("button",{onClick:c,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},gt=["BDRRMC Chairman","BDRRM Focal Person","Operation/Admin/ Infra/Shelter","Prevention & Mitigation Sub-Committee","Preparedness Sub-Committee","Response Sub-Committee","Recovery & Rehabilitation Sub-Committee","SRR","Security And Safety","Education","Damage Control/POANA Team/RDANA","Health Or First Aid & Psycho-Social Support","Livelihood","Evacuation/Camp Mngt.","Relief Distribution","Protection","Research And Planning","Communication & Warning","Transportation","Fire Management","Infrastructure and Shelter"],oe={designation:"",name:"",contact:""},jt=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]);g.useEffect(()=>{t.bdrrmc_directory||r({...t,bdrrmc_directory:gt.map(s=>({...oe,designation:s}))})},[]);const d=t.bdrrmc_directory||[],b=(s,i,l)=>{const o=[...d];o[s]={...o[s],[i]:l},r({...t,bdrrmc_directory:o})},c=()=>{r({...t,bdrrmc_directory:[...d,{...oe}]}),j.success("Row added successfully!")},x=s=>{r({...t,bdrrmc_directory:d.filter((i,l)=>l!==s)}),j.error("Row removed!")},n=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{h.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[d]),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"Designation/Team"}),e.jsx("th",{className:"border px-2 py-1",children:"Name"}),e.jsx("th",{className:"border px-2 py-1",children:"Contact No."}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),e.jsx("td",{className:"border px-2 py-1 text-left",children:e.jsx("textarea",{ref:l=>h.current[i*3]=l,rows:1,value:s.designation,onChange:l=>{b(i,"designation",l.target.value),n(l)},className:"border w-full px-2 py-1 text-left resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:l=>h.current[i*3+1]=l,rows:1,value:s.name,onChange:l=>{b(i,"name",l.target.value),n(l)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden"})}),e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:l=>h.current[i*3+2]=l,rows:1,value:s.contact,onChange:l=>{b(i,"contact",l.target.value),n(l)},className:"border w-full px-2 py-1 text-center resize-none overflow-hidden"})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>x(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsx("button",{onClick:c,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},ie={task:"",responsible:"",remarks:""},Nt=()=>{const{craData:t,setCraData:r}=g.useContext(v),h=g.useRef([]);g.useEffect(()=>{t.evacuation_plan||r({...t,evacuation_plan:[{...ie}]})},[]);const d=t.evacuation_plan||[],b=(s,i,l)=>{const o=[...d];o[s]={...o[s],[i]:l},r({...t,evacuation_plan:o})},c=()=>{r({...t,evacuation_plan:[...d,{...ie}]}),j.success("Row added successfully!")},x=s=>{r({...t,evacuation_plan:d.filter((i,l)=>l!==s)}),j.error("Row removed!")},n=s=>{s.target.style.height="auto",s.target.style.height=s.target.scrollHeight+"px"};return g.useEffect(()=>{h.current.forEach(s=>{s&&(s.style.height="auto",s.style.height=s.scrollHeight+"px")})},[d]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-md font-bold mb-3",children:"Barangay Evacuation Plan"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"border border-collapse w-full text-xs text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-2 py-1",children:"#"}),e.jsx("th",{className:"border px-2 py-1",children:"THINGS TO DO"}),e.jsx("th",{className:"border px-2 py-1",children:"RESPONSIBLE PERSON"}),e.jsx("th",{className:"border px-2 py-1",children:"REMARKS"}),e.jsx("th",{className:"border px-2 py-1 w-[40px]"})]})}),e.jsx("tbody",{children:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:i+1}),["task","responsible","remarks"].map((l,o)=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("textarea",{ref:a=>h.current[i*3+o]=a,rows:1,value:s[l],onChange:a=>{b(i,l,a.target.value),n(a)},className:"border w-full px-2 py-1 text-left resize-none overflow-hidden"})},l)),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{onClick:()=>x(i),className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",children:"✕"})})]},i))})]})}),e.jsx("button",{onClick:c,className:"mt-3 px-3 py-1 bg-blue-500 text-white rounded text-xs",children:"+ Add Row"})]})},ft=()=>e.jsxs("div",{children:[e.jsx(C,{title:"11. istribution of Relief Goods to Affected Families and Individuals",children:e.jsx(xt,{})}),e.jsx(C,{title:"12. Inventory of Tranings Attended by the Members of BDRRMC",children:e.jsx(mt,{})}),e.jsx(C,{title:`13. Inventory of Responsive Equipment that can be be utilized during Calamities
            and Disasters`,children:e.jsx(yt,{})}),e.jsx(C,{title:"BDRRMC Directory",children:e.jsx(jt,{})}),e.jsx(C,{title:"BARANGAY EVACUATION PLAN",children:e.jsx(Nt,{})})]});function ss(){const t=[{label:"Community Risk Assessment (CRA)",showOnMobile:!1}],[r,h]=g.useState(1),[d,b]=g.useState(()=>{try{const a=localStorage.getItem("craDataDraft");return a?JSON.parse(a):{population:[],livelihood:[],infrastructure:[],institutions:[],hazards:[],evacuation:[]}}catch(a){return console.error("Error loading draft:",a),{population:[],livelihood:[],infrastructure:[],institutions:[],hazards:[],evacuation:[]}}});g.useEffect(()=>{localStorage.setItem("craDataDraft",JSON.stringify(d))},[d]);const[c,x]=g.useState([]),[n,s]=g.useState({}),i=["Barangay Resource Profile ","Community Disaster History","Barangay Risk Assessment","Inventory & Evacuations","Disaster Readiness"],l=a=>{switch(a){case 1:return e.jsx(Le,{});case 2:return e.jsx(nt,{});case 3:return e.jsx(st,{});case 4:return e.jsx(ut,{});case 5:return e.jsx(ft,{})}},o=a=>{let u=r;if(a==="next"){if(r===i.length){ye.post(route("cra.store"),d,{onError:p=>{s(p),console.error("Validation Errors:",p);const m=Object.values(p).join("<br />");Ce.error("Validation Errors",{description:e.jsx("div",{dangerouslySetInnerHTML:{__html:m}}),duration:5e3,closeButton:!0})}});return}u++}else u--;u>0&&u<=i.length&&h(u)};return e.jsxs(je,{children:[e.jsx(we,{richColors:!0}),e.jsx(be,{title:"CRA"}),e.jsx(ge,{breadcrumbs:t}),e.jsxs("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8 mt-6",children:[e.jsxs("div",{className:"text-left mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Community Risk Assessment (CRA)"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Step-by-step process for evaluating barangay resources, hazards, and disaster readiness"})]}),e.jsx("div",{className:"bg-blue-100 rounded-t-xl px-2 sm:px-6 lg:px-8 py-2 border-gray-200 shadow-lg",children:e.jsx(fe,{steps:i,currentStep:r})}),e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 rounded-b-xl p-2 drop-shadow-[0_4px_6px_rgba(0,0,0,0.1)]",children:e.jsx("div",{className:"my-2 pb-5 pr-5 pl-5 pt-0",children:e.jsx(v.Provider,{value:{craData:d,setCraData:b,finalData:c,setFinalData:x,errors:n,setErrors:s},children:l(r)})})}),e.jsx("div",{className:"mt-5",children:e.jsx(ve,{handleClick:o,currentStep:r,steps:i,craData:d})})]})]})}export{ss as default};
