const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SeniorForm-CAtjmbU5.js","assets/app-D2VBHUnE.js","assets/app-CiixUrdr.css","assets/button-JXF2cuM-.js","assets/clsx-B-dksMZM.js","assets/utils-CkmPJWYF.js","assets/InputField-CpgW95UT.js","assets/InputError-BL45JlCV.js","assets/InputLabel-k09HPs3i.js","assets/RadioGroup-Dm2Mo-y6.js","assets/DropdownInputField-DZmkJTl1.js","assets/index-C2GEi9Oq.js","assets/index-DoJK41tF.js","assets/iconBase-CwqvEYsG.js","assets/rotate-ccw-B0YuVpYV.js","assets/createLucideIcon-qFzIO3KD.js"])))=>i.map(i=>d[i]);
import{z as K,g as ue,K as me,r as o,m as pe,S as ne,a as ae,j as r,$ as fe,L as xe,U as be,_ as he}from"./app-D2VBHUnE.js";import{S as ge}from"./AdminLayout-BvapmRau.js";import{B as ye}from"./button-JXF2cuM-.js";import{I as _e}from"./input-CsX4RkmY.js";import ve from"./BreadcrumbsHeader-D50VREse.js";import je from"./DynamicTable-XHjF8o-O.js";import Se from"./DynamicTableControls-I3Z4kOWV.js";import Ne from"./SidebarModal-DNYbxHgQ.js";import{F as ke}from"./FillterToggle-C9gZhFi5.js";import we from"./PersonDetailContent-Cnv6cDFd.js";import Ee from"./DeleteConfirmationModal-mSKtI5Ku.js";import{u as Ce}from"./useAppUrl-BohVm5NF.js";import{t as R,T as De}from"./index-CmbHX13U.js";import{R as ze,b as Te}from"./constants-B2gvBLga.js";import Re from"./ActionMenu-DEwdglpY.js";import{E as Oe}from"./ExportButton-BHRHvK_-.js";import{c as le}from"./createLucideIcon-qFzIO3KD.js";import{S as Ie}from"./search-D4RGGk5s.js";import{E as Me}from"./eye-CHIr_NBw.js";import{S as $e}from"./square-pen-D6Zluk2r.js";import{T as Le}from"./trash-2-Ix8CbBXs.js";import"./sidebar-MVOyybzj.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-6s3vvleY.js";import"./index-C2GEi9Oq.js";import"./floating-ui.react-dom-DwQNVWkT.js";import"./x-DtldsTYz.js";import"./skeleton-CZuzpLfI.js";import"./tooltip-Cb0wL2_a.js";import"./nav-user-BCj3xiYY.js";import"./avatar-7KytdQpz.js";import"./dropdown-menu-DG5UGZdM.js";import"./check-C5u2RFjT.js";import"./chevron-right-BJZaoRcX.js";import"./users-round-CjEM6b0u.js";import"./heart-pulse-Bpcsk9jC.js";import"./chevron-up-CnPsG_gG.js";import"./breadcrumb-D0WyvY7Z.js";import"./iconBase-CwqvEYsG.js";import"./index-Bxj-GTwv.js";import"./index-DHbXjuq_.js";import"./ellipsis-DAg75UxB.js";import"./file-output-QLtJnufa.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Ae=le("id-card",Pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Ue=le("user-check",Fe);var se,oe;function qe(){if(oe)return se;oe=1;var N="Expected a function",B=NaN,Q="[object Symbol]",g=/^\s+|\s+$/g,O=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,C=/^0o[0-7]+$/i,y=parseInt,V=typeof K=="object"&&K&&K.Object===Object&&K,G=typeof self=="object"&&self&&self.Object===Object&&self,X=V||G||Function("return this")(),Z=Object.prototype,k=Z.toString,M=Math.max,$=Math.min,w=function(){return X.Date.now()};function L(n,l,m){var _,x,z,p,c,b,v=0,A=!1,i=!1,T=!0;if(typeof n!="function")throw new TypeError(N);l=D(l)||0,E(m)&&(A=!!m.leading,i="maxWait"in m,z=i?M(D(m.maxWait)||0,l):z,T="trailing"in m?!!m.trailing:T);function F(a){var f=_,S=x;return _=x=void 0,v=a,p=n.apply(S,f),p}function U(a){return v=a,c=setTimeout(j,l),A?F(a):p}function W(a){var f=a-b,S=a-v,H=l-f;return i?$(H,z-S):H}function J(a){var f=a-b,S=a-v;return b===void 0||f>=l||f<0||i&&S>=z}function j(){var a=w();if(J(a))return Y(a);c=setTimeout(j,W(a))}function Y(a){return c=void 0,T&&_?F(a):(_=x=void 0,p)}function te(){c!==void 0&&clearTimeout(c),v=0,_=b=x=c=void 0}function re(){return c===void 0?p:Y(w())}function q(){var a=w(),f=J(a);if(_=arguments,x=this,b=a,f){if(c===void 0)return U(b);if(i)return c=setTimeout(j,l),F(b)}return c===void 0&&(c=setTimeout(j,l)),p}return q.cancel=te,q.flush=re,q}function E(n){var l=typeof n;return!!n&&(l=="object"||l=="function")}function P(n){return!!n&&typeof n=="object"}function ee(n){return typeof n=="symbol"||P(n)&&k.call(n)==Q}function D(n){if(typeof n=="number")return n;if(ee(n))return B;if(E(n)){var l=typeof n.valueOf=="function"?n.valueOf():n;n=E(l)?l+"":l}if(typeof n!="string")return n===0?n:+n;n=n.replace(g,"");var m=I.test(n);return m||C.test(n)?y(n.slice(2),m?2:8):O.test(n)?B:+n}return se=L,se}var Be=qe();const Ve=ue(Be),Ge=be.lazy(()=>he(()=>import("./SeniorForm-CAtjmbU5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])));function $t({seniorCitizens:N,puroks:B,queryParams:Q={}}){const g=me().props,O=(g==null?void 0:g.success)??null,I=(g==null?void 0:g.error)??null,C=Ce(),[y,V]=o.useState(()=>({...Q})),[G,X]=o.useState(y.name??""),[Z,k]=o.useState(!1),[M,$]=o.useState(null),[w,L]=o.useState(null),[E,P]=o.useState(null),[ee,D]=o.useState(!1),[n,l]=o.useState(null),[m,_]=o.useState(!1),[x,z]=o.useState({}),p=o.useMemo(()=>[{key:"id",label:"ID"},{key:"purok_number",label:"Purok"},{key:"name",label:"Senior Name"},{key:"sex",label:"Sex"},{key:"birthdate",label:"Birthdate"},{key:"age",label:"Age"},{key:"is_pensioner",label:"Pensioner"},{key:"osca_id_number",label:"OSCA Number"},{key:"pension_type",label:"Pension Type"},{key:"living_alone",label:"Living Alone"},{key:"registered_senior",label:"Registered Senior"},{key:"actions",label:"Actions"}],[]),[c,b]=o.useState(()=>{try{const e=localStorage.getItem("household_visible_columns");return e?JSON.parse(e):p.map(t=>t.key)}catch{return p.map(e=>e.key)}});o.useEffect(()=>{localStorage.setItem("household_visible_columns",JSON.stringify(c))},[c]);const v=o.useCallback(e=>{if(!e)return"Unknown";const t=new Date(e),s=new Date;let u=s.getFullYear()-t.getFullYear();const h=s.getMonth()-t.getMonth();return(h<0||h===0&&s.getDate()<t.getDate())&&u--,u},[]),{data:A,setData:i,post:T,errors:F,reset:U,clearErrors:W}=pe({resident_id:null,resident_image:null,resident_name:"",gender:null,birthdate:null,purok_number:null,osca_id_number:"",is_pensioner:null,pension_type:null,living_alone:null,senior_id:null,_method:void 0}),J=o.useMemo(()=>Ve(e=>{const t={...y};e&&e.trim()!==""?t.name=e:delete t.name,t.page&&delete t.page,V(t),ne.get(route("senior_citizen.index",t),{},{preserveState:!0,preserveScroll:!0})},450),[y]),j=(e,t)=>{const s={...y};t&&t.trim()!==""?s[e]=t:delete s[e],s.page&&delete s.page,V(s),ne.get(route("senior_citizen.index",s),{},{preserveState:!0,preserveScroll:!0})},Y=e=>{e.preventDefault(),j("name",G)},te=(e,t)=>{t.key==="Enter"&&j(e,t.target.value)},re=o.useCallback(async e=>{try{if(x[e])$(x[e]);else{const t=await ae.get(`${C}/resident/showresident/${e}`);z(s=>({...s,[e]:t.data.resident})),$(t.data.resident)}k(!0)}catch(t){console.error("Error fetching resident:",t),R.error("Failed to fetch resident details")}},[x,C]),q=e=>{var s;const t=(s=(N==null?void 0:N.data)??N)==null?void 0:s.find(u=>u.id==e);t&&(k(!0),L(t),i("resident_id",t.id),i("resident_name",`${t.firstname} ${t.middlename??""} ${t.lastname??""} ${t.suffix??""}`),i("purok_number",t.purok_number),i("birthdate",t.birthdate),i("resident_image",t.resident_picture_path))},a=e=>{e.preventDefault(),T(route("senior_citizen.store"),{onError:t=>{console.error("Validation Errors:",t);const s=Object.values(t);R.error("Validation Error",{description:r.jsx("ul",{children:s.map((u,h)=>r.jsx("li",{children:u},h))})})}})},f=e=>{e.preventDefault(),T(route("senior_citizen.update",A.senior_id),{onError:t=>{console.error("Validation Errors:",t);const s=Object.values(t);R.error("Validation Error",{description:r.jsx("ul",{children:s.map((u,h)=>r.jsx("li",{children:u},h))})})}})},S=o.useCallback(async e=>{var t,s,u,h;try{const d=(await ae.get(`${C}/senior_citizen/seniordetails/${e}`)).data.seniordetails;P(d),i("resident_id",d.id),i("resident_name",`${d.firstname} ${d.middlename??""} ${d.lastname??""} ${d.suffix??""}`),i("purok_number",d.purok_number),i("birthdate",d.birthdate),i("resident_image",d.resident_picture_path),i("osca_id_number",(t=d.seniorcitizen)!=null&&t.osca_id_number?d.seniorcitizen.osca_id_number.toString():""),i("is_pensioner",((s=d.seniorcitizen)==null?void 0:s.is_pensioner)||""),i("pension_type",((u=d.seniorcitizen)==null?void 0:u.pension_type)||""),i("living_alone",((h=d.seniorcitizen)==null?void 0:h.living_alone)||""),i("senior_id",d.seniorcitizen.id),i("_method","PUT"),k(!0)}catch(ie){console.error("Error fetching senior details:",ie),R.error("Failed to fetch senior details")}},[C,i]),H=e=>{l(e),D(!0)},ce=()=>{ne.delete(route("senior_citizen.destroy",n)),D(!1)},de=o.useMemo(()=>({id:e=>e.id,purok_number:e=>r.jsx("span",{className:"text-gray-800",children:e.purok_number}),name:e=>r.jsxs(fe,{href:route("resident.show",e.id),className:"hover:text-blue-500 hover:underline",children:[e.firstname," ",e.middlename??""," ",e.lastname??"",e.suffix?`, ${e.suffix}`:""]}),sex:e=>{const t=e.sex,s=ze[t]??"Unknown",u=Te[t]??"bg-gray-300";return r.jsx("span",{className:`py-1 px-2 rounded-xl text-sm font-medium whitespace-nowrap ${u}`,children:s})},birthdate:e=>{const t=e.birthdate;return t?new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):r.jsx("span",{className:"text-gray-400 italic",children:"N/A"})},age:e=>v(e.birthdate),is_pensioner:e=>{var t;return e.seniorcitizen==null?r.jsx("span",{className:"text-yellow-600 font-medium",children:"Pending"}):((t=e.seniorcitizen.is_pensioner)==null?void 0:t.toLowerCase())==="yes"?r.jsx("span",{className:"text-green-600 font-medium",children:"Yes"}):r.jsx("span",{className:"text-gray-500",children:"No"})},osca_id_number:e=>{var t;return(t=e.seniorcitizen)!=null&&t.osca_id_number?r.jsx("span",{className:"text-gray-800",children:e.seniorcitizen.osca_id_number}):r.jsx("span",{className:"text-gray-400 italic",children:"Not Assigned"})},pension_type:e=>{var s;const t=(s=e.seniorcitizen)==null?void 0:s.pension_type;return!t||t.toLowerCase()==="none"?r.jsx("span",{className:"text-gray-400 italic",children:"None"}):r.jsx("span",{className:"text-gray-800",children:t})},living_alone:e=>{var t;return((t=e.seniorcitizen)==null?void 0:t.living_alone)==1?r.jsx("span",{className:"text-red-600 font-medium",children:"Yes"}):r.jsx("span",{className:"text-gray-500",children:"No"})},registered_senior:e=>e.seniorcitizen?r.jsx("span",{className:"text-green-600 font-medium",children:"Yes"}):r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-red-500 italic",children:"No"})}),actions:e=>{const t=!!e.seniorcitizen,s=[{label:"View",icon:r.jsx(Me,{className:"w-4 h-4 text-indigo-600"}),onClick:()=>re(e.id)}];return t?s.push({label:"Edit",icon:r.jsx($e,{className:"w-4 h-4 text-green-500"}),onClick:()=>S(e.id)},{label:"Delete",icon:r.jsx(Le,{className:"w-4 h-4 text-red-600"}),onClick:()=>H(e.seniorcitizen.id)}):s.push({label:"Register",icon:r.jsx(Ue,{className:"w-4 h-4 text-blue-500"}),onClick:()=>q(e.id)}),r.jsx("div",{className:"max-w-[140px] sm:max-w-none overflow-hidden",children:r.jsx(Re,{actions:s})})}}),[v,S]);return o.useEffect(()=>{O&&(k(!1),U(),W(),L(null),P(null),R.success(O,{description:"Operation successful!"}))},[O]),o.useEffect(()=>{I&&R.error(I,{description:"Operation failed!"})},[I]),r.jsxs(ge,{children:[r.jsx(xe,{title:"Senior Citizen"}),r.jsx(ve,{breadcrumbs:[{label:"Residents Information",showOnMobile:!1},{label:"Senior Citizen",showOnMobile:!0}]}),r.jsx(De,{richColors:!0}),r.jsx("div",{className:"p-2 md:p-4",children:r.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:r.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl shadow-sm",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:r.jsx(Ae,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900",children:"Senior Citizen Records"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage and track senior citizen information. Quickly search, filter, or export records to support programs and services."})]})]})}),r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[r.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[r.jsx(Se,{allColumns:p,visibleColumns:c,setVisibleColumns:b,showFilters:m,toggleShowFilters:()=>_(e=>!e)}),r.jsx(Oe,{url:"report/export-seniorcitizen-excel",queryParams:y})]}),r.jsx("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:r.jsxs("form",{onSubmit:Y,className:"flex w-[300px] max-w-lg items-center space-x-1",children:[r.jsx(_e,{type:"text",placeholder:"Search Name",value:G,onChange:e=>{X(e.target.value),J(e.target.value)},onKeyDown:e=>te("name",e),className:"w-full"}),r.jsxs("div",{className:"relative group z-50",children:[r.jsx(ye,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:r.jsx(Ie,{})}),r.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]})]})})]}),m&&r.jsx(ke,{queryParams:y,searchFieldName:j,visibleFilters:["purok","sex","gender","is_pensioner","pension_type","living_alone","birth_month","is_registered"],puroks:B,showFilters:!0,pensionTypes:[{label:"SSS",value:"SSS"},{label:"DSWD",value:"DSWD"},{label:"GSIS",value:"GSIS"},{label:"private",value:"private"},{label:"none",value:"none"}],months:[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],clearRouteName:"senior_citizen.index",clearRouteParams:{}}),r.jsx(je,{passedData:N,columnRenderers:de,allColumns:p,visibleColumns:c,showTotal:!0})]})})}),r.jsxs(Ne,{isOpen:Z,onClose:()=>{k(!1),U(),W(),L(null),$(null),P(null)},title:w?"Register Senior Citizen":E?"Edit Senior Citizen Details":M?"Resident Details":"",children:[M&&r.jsx(we,{person:M}),(w!=null||E!=null)&&r.jsx(o.Suspense,{fallback:r.jsx("div",{children:"Loading form..."}),children:r.jsx(Ge,{data:A,errors:F,setData:i,reset:U,onSubmit:E?f:a,registerSenior:w})})]}),r.jsx(Ee,{isOpen:ee,onClose:()=>D(!1),onConfirm:ce,residentId:n})]})}export{$t as default};
