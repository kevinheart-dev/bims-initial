import{m as g,r as f,j as e}from"./app-CSbLTV9t.js";const j=({initialData:s,onSuccess:c})=>{const{data:r,setData:m,put:u,processing:p,errors:t}=g({name:"",position:"",purok:"",termStart:"",termEnd:"",phone:"",email:"",image:null,_method:"PUT"});f.useEffect(()=>{s&&m({name:s.name||"",position:s.position||"",purok:s.purok||"",termStart:s.termStart||"",termEnd:s.termEnd||"",phone:s.phone||"",email:s.email||"",image:s.image||null,_method:"PUT"})},[s,m]);const a=o=>{m(o.target.name,o.target.value)},x=o=>{const n=o.target.files[0];n&&m("image",n)},h=o=>{o.preventDefault();const n=s==null?void 0:s.id;if(!n){console.error("No official ID provided");return}const d=new FormData;for(const l in r)r[l]!==null&&r[l]!==void 0&&(l==="image"&&r.image instanceof File?d.append("image",r.image):d.append(l,r[l]));d.append("_method","PUT"),u(route("officials.update",n),{data:d,forceFormData:!0,onSuccess:()=>{c&&c()},onError:l=>{console.error("Validation errors:",l)}})},i=r.image instanceof File?URL.createObjectURL(r.image):r.image;return e.jsxs("form",{onSubmit:h,className:"max-w-xl space-y-6",children:[e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("label",{htmlFor:"imageUpload",className:"w-32 h-32 border rounded overflow-hidden bg-gray-100 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition",children:i?e.jsx("img",{src:i,alt:"Preview",className:"object-cover w-full h-full"}):e.jsx("span",{className:"text-gray-400 text-sm text-center px-2",children:"Click to Upload"})}),e.jsx("input",{id:"imageUpload",type:"file",accept:"image/*",onChange:x,className:"hidden"}),r.image&&!i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 break-all w-32 text-center",children:typeof r.image=="string"?r.image:r.image.name}),t.image&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.image})]}),e.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter full name",value:r.name,onChange:a,className:"w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"position",children:"Position"}),e.jsxs("select",{id:"position",name:"position",value:r.position,onChange:a,className:"w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Select barangay position"}),e.jsx("option",{value:"Chairman",children:"Chairman"}),e.jsx("option",{value:"Secretary",children:"Secretary"}),e.jsx("option",{value:"Treasurer",children:"Treasurer"})]}),t.position&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.position})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"purok",children:"Designated Purok"}),e.jsx("input",{id:"purok",name:"purok",type:"text",placeholder:"Enter purok number or name",value:r.purok,onChange:a,className:"w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.purok&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.purok})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"termStart",children:"Term Start"}),e.jsx("input",{id:"termStart",name:"termStart",type:"text",placeholder:"Year",value:r.termStart,onChange:a,className:"w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.termStart&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.termStart})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"termEnd",children:"Term End"}),e.jsx("input",{id:"termEnd",name:"termEnd",type:"text",placeholder:"Year",value:r.termEnd,onChange:a,className:"w-full rounded border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.termEnd&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.termEnd})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{id:"phone",name:"phone",type:"text",placeholder:"phone number",value:r.phone,onChange:a,disabled:!0,className:"w-full rounded border border-gray-300 px-3 py-2 bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",placeholder:"email",value:r.email,onChange:a,disabled:!0,className:"w-full rounded border border-gray-300 px-3 py-2 bg-gray-100 cursor-not-allowed"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:p,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:"Update"})})]})};export{j as default};
