import{K as W,r as o,j as e,L as V,$ as w,S as m}from"./app-OMiIBAVv.js";import{S as $}from"./AdminLayout-CUYq8DRk.js";import{B as _}from"./button-DSR4zr8t.js";import{I as Q}from"./input-BGuCCM3F.js";import G from"./BreadcrumbsHeader-D7yXDAqZ.js";import{t as v,T as J}from"./index-0Qv22I-m.js";import"./table-Btx8o7Vo.js";import"./dropdown-menu-Bvu9yf_7.js";import U from"./DynamicTable-UkXv7no2.js";import X from"./ActionMenu-BwZQbtv1.js";import{F as Y}from"./FillterToggle-DNCt5F0M.js";import"./label-CpR9uzLH.js";import Z from"./DynamicTableControls-D0m5fsZs.js";import P from"./DeleteConfirmationModal-TJ1uBlKB.js";import{H as q}from"./users-round-DM5XvS4t.js";import{S as ee}from"./search-B5GIhMYd.js";import{H as te}from"./house-plus-CFlL9Fwu.js";import{E as se}from"./eye-Wkg7vRqS.js";import{S as ae}from"./square-pen-CIUQNKLN.js";import{T as ie}from"./trash-2-jR1sYQPd.js";import"./sidebar-8I0oMIHa.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-CI6SsBKC.js";import"./index-BLQZ4u8d.js";import"./floating-ui.react-dom-CMRH_ZRG.js";import"./x-CWRGpm6F.js";import"./createLucideIcon-Axl_0YCz.js";import"./skeleton-B3ns0wAt.js";import"./tooltip-DovJGv4D.js";import"./nav-user-CHo7Aeqf.js";import"./avatar-EoKRnGG_.js";import"./useAppUrl-D_iSPAaw.js";import"./heart-pulse-BEye5CQy.js";import"./chevron-up-aIKK6lnp.js";import"./breadcrumb-BupgMzbl.js";import"./chevron-right-Cy23RFOt.js";import"./check-CuPlmUjy.js";import"./ellipsis-PuzZ1_TO.js";import"./constants-iESbBslm.js";function Xe({households:k,puroks:S,queryParams:l,toiletTypes:D,electricityTypes:C,waterSourceTypes:T,wasteManagementTypes:z,internetTypes:H,bathTypes:E}){const O=[{label:"Residents Information",showOnMobile:!1},{label:"Households",showOnMobile:!0}];l=l||{};const n=W().props,d=(n==null?void 0:n.success)??null,p=(n==null?void 0:n.error)??null,[f,A]=o.useState(l.name??""),[F,u]=o.useState(!1),[g,I]=o.useState(null),M=t=>{t.preventDefault(),x("name",f)},x=(t,s)=>{s&&s.trim()!==""?l[t]=s:delete l[t],l.page&&delete l.page,m.get(route("household.overview",l))},B=(t,s)=>{if(s.key==="Enter")x(t,s.target.value);else return},c=[{key:"id",label:"ID"},{key:"house_number",label:"House Number"},{key:"bath_and_wash_area",label:"Bath & Wash Area"},{key:"toilets",label:"Toilet Type(s)"},{key:"electricity_types",label:"Electricity Source(s)"},{key:"water_source_types",label:"Water Source(s)"},{key:"waste_management_types",label:"Waste Management Type(s)"},{key:"livestocks_text",label:"Livestock Summary"},{key:"pets_text",label:"Pet Summary"},{key:"internet_accessibility",label:"Internet Accessibility"},{key:"purok",label:"Purok Number"},{key:"actions",label:"Actions"}],[h,b]=o.useState(c.map(t=>t.key));o.useEffect(()=>{h.length===0&&b(c.map(t=>t.key))},[]);const[re,le]=o.useState(!0),[oe,ne]=o.useState(!1),y=Object.entries(l||{}).some(([t,s])=>["purok","toilet","electricity","water","waste","internet","bath"].includes(t)&&s&&s!=="");o.useEffect(()=>{y&&N(!0)},[y]);const[j,N]=o.useState(y),R={id:t=>e.jsx("span",{className:"text-gray-800 font-medium",children:t.id??"Not specified"}),house_number:t=>e.jsx(w,{href:route("household.show",{household:t.id}),className:"text-blue-600 hover:underline font-semibold",children:t.house_number??e.jsx("span",{className:"text-gray-400 font-normal italic",children:"Not specified"})}),bath_and_wash_area:t=>t.bath_and_wash_area?e.jsx("span",{className:"text-gray-800 capitalize font-medium",children:t.bath_and_wash_area}):e.jsx("span",{className:"text-gray-400 italic",children:"Not specified"}),toilets:t=>{const s=t.toilets??[];return s.length?e.jsx("ul",{className:"text-gray-800 space-y-0.5",children:s.map((r,a)=>e.jsx("li",{className:"capitalize",children:e.jsx("span",{className:"font-medium",children:r.toilet_type.replace(/_/g," ")})},a))}):e.jsx("span",{className:"text-gray-400 italic",children:"No toilet data"})},electricity_types:t=>{const s=t.electricity_types??[];return s.length?e.jsx("ul",{className:"text-gray-800 space-y-0.5",children:s.map((r,a)=>e.jsx("li",{className:"capitalize",children:e.jsx("span",{className:"font-medium",children:r.electricity_type.replace(/_/g," ")})},a))}):e.jsx("span",{className:"text-gray-400 italic",children:"No electricity data"})},water_source_types:t=>{const s=t.water_source_types??[];return s.length?e.jsx("ul",{className:"text-gray-800 space-y-0.5",children:s.map((r,a)=>e.jsx("li",{className:"capitalize",children:e.jsx("span",{className:"font-medium",children:r.water_source_type.replace(/_/g," ")})},a))}):e.jsx("span",{className:"text-gray-400 italic",children:"No water source data"})},waste_management_types:t=>{const s=t.waste_management_types??[];return s.length?e.jsx("ul",{className:"text-gray-800 space-y-0.5",children:s.map((r,a)=>e.jsx("li",{className:"capitalize",children:e.jsx("span",{className:"font-medium",children:r.waste_management_type.replace(/_/g," ")})},a))}):e.jsx("span",{className:"text-gray-400 italic",children:"No waste data"})},livestocks_text:t=>{const s=t.livestocks??[];if(s.length===0)return e.jsx("span",{className:"text-gray-400 italic",children:"No livestock recorded"});const r=s.reduce((a,i)=>(a[i.livestock_type]=(a[i.livestock_type]??0)+(i.quantity??1),a),{});return e.jsx("ul",{className:"space-y-0.5 text-gray-800",children:Object.entries(r).map(([a,i])=>e.jsxs("li",{children:[e.jsxs("span",{className:"capitalize font-medium",children:[a.replace(/_/g," "),":"]})," ",e.jsx("span",{className:"text-gray-700 font-semibold",children:i})]},a))})},pets_text:t=>{const s=t.pets??[];if(s.length===0)return e.jsx("span",{className:"text-gray-400 italic",children:"No pets recorded"});const r=s.reduce((a,i)=>(a[i.pet_type]||(a[i.pet_type]={total:0,vaccinated:0}),a[i.pet_type].total+=1,i.is_vaccinated&&(a[i.pet_type].vaccinated+=1),a),{});return e.jsx("ul",{className:"space-y-0.5 text-gray-800",children:Object.entries(r).map(([a,i])=>e.jsxs("li",{children:[e.jsxs("span",{className:"capitalize font-medium",children:[a.replace(/_/g," "),":"]})," ",e.jsx("span",{className:"text-gray-700 font-semibold",children:i.total})," ",e.jsxs("span",{className:"text-gray-500",children:["(",i.vaccinated,"/",i.total," vaccinated)"]})]},a))})},internet_accessibility:t=>{const s=t.internet_accessibility??[];return s.length===0?e.jsx("span",{className:"text-gray-400 italic",children:"No internet information"}):e.jsx("ul",{className:"text-gray-800 space-y-0.5",children:s.map((r,a)=>e.jsxs("li",{children:[e.jsxs("span",{className:"capitalize font-medium",children:[r.connection_type??"Not specified",":"]})," ",e.jsx("span",{className:"text-gray-700 font-semibold",children:r.provider??"Not provided"})]},a))})},purok:t=>{var s;return(s=t.purok)!=null&&s.purok_number?e.jsx("span",{className:"text-gray-800 font-medium",children:t.purok.purok_number}):e.jsx("span",{className:"text-gray-400 italic",children:"Not specified"})},actions:t=>e.jsx(X,{actions:[{label:"View",icon:e.jsx(se,{className:"w-4 h-4 text-indigo-600"}),onClick:()=>m.visit(route("household.show",{household:t.id}))},{label:"Edit",icon:e.jsx(ae,{className:"w-4 h-4 text-green-500"}),onClick:()=>m.visit(route("household.edit",{household:t.id}))},{label:"Delete",icon:e.jsx(ie,{className:"w-4 h-4 text-red-600"}),onClick:()=>K(t.id)}]})},K=t=>{I(t),u(!0)},L=()=>{m.delete(route("household.destroy",g)),u(!1)};return o.useEffect(()=>{d&&v.success(d,{description:"Operation successful!",duration:3e3,closeButton:!0}),n.success=null},[d]),o.useEffect(()=>{p&&v.error(p,{description:"Operation failed!",duration:3e3,closeButton:!0}),n.error=null},[p]),e.jsxs($,{children:[e.jsx(V,{title:"Households Dashboard"}),e.jsx(G,{breadcrumbs:O}),e.jsx(J,{richColors:!0}),e.jsx("div",{className:"pt-4",children:e.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-full",children:e.jsx(q,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900",children:"Household Data Overview"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and manage comprehensive information about households within the barangay. Access records, apply filters, and maintain accurate data for effective community planning."})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[e.jsx("div",{className:"flex items-start gap-2 flex-wrap",children:e.jsx(Z,{allColumns:c,visibleColumns:h,setVisibleColumns:b,showFilters:j,toggleShowFilters:()=>N(t=>!t)})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[e.jsxs("form",{onSubmit:M,className:"flex w-[300px] max-w-lg items-center space-x-1",children:[e.jsx(Q,{type:"text",placeholder:"Search for Household Number",value:f,onChange:t=>A(t.target.value),onKeyDown:t=>B("name",t),className:"w-full"}),e.jsxs("div",{className:"relative group z-50",children:[e.jsx(_,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:e.jsx(ee,{})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]})]}),e.jsx(w,{href:route("household.create"),children:e.jsxs("div",{className:"relative group z-50",children:[e.jsx(_,{variant:"outline",className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Add Household"})]})})]})]}),j&&e.jsx(Y,{queryParams:l,searchFieldName:x,visibleFilters:["purok","toilet","electricity","water","waste","internet","bath"],showFilters:!0,puroks:S,toiletTypes:D,electricityTypes:C,wasteManagementTypes:z,waterSourceTypes:T,internetTypes:H,bathTypes:E,clearRouteName:"household.overview",clearRouteParams:{}}),e.jsx(U,{passedData:k,allColumns:c,columnRenderers:R,queryParams:l,visibleColumns:h,showTotal:!0}),e.jsx(P,{isOpen:F,onClose:()=>{u(!1)},onConfirm:L,residentId:g})]})})})]})}export{Xe as default};
