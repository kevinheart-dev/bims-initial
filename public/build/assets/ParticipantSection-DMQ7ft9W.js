import{j as e}from"./app-CSbLTV9t.js";import{I as N}from"./index-k6Ra7WmB.js";import{D as f}from"./DropdownInputField-D-lPqSgr.js";import{I as u}from"./InputError-BCqWxJV0.js";import{I as v}from"./InputLabel-D9dJg9rZ.js";import{T as _}from"./textarea-Bqc0VVhC.js";import{R as w}from"./constants-CQOY_faM.js";import{c as C}from"./createLucideIcon-K65SoRPX.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],$=C("circle-plus",I),P=({title:n,dataArray:r,setDataArray:m,errors:l,residentsList:d,fieldKey:i="resident_id",notesKey:o="notes",disableAdd:h=!1})=>{const x=(s,t)=>{const a=d.find(j=>Number(j.value)===Number(s)),c=[...r];a?c[t]={...c[t],[i]:a.value,resident_name:a.label,purok_number:a.purok_number,birthdate:a.birthdate,resident_image:a.resident_picture_path,sex:a.sex,contact_number:a.contact_number,email:a.email}:c[t]={...c[t],[i]:"",resident_name:s},m(c)},p=(s,t)=>{const a=[...r];a[t]={...a[t],[o]:s},m(a)},g=()=>{m([...r,{[i]:null,[o]:""}])},b=s=>{m(r.filter((t,a)=>a!==s))};return e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:n}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select participants involved. You may choose from existing residents or enter names manually."}),r.map((s,t)=>e.jsxs("div",{className:"border p-4 mb-4 rounded-md relative bg-gray-50",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n.slice(0,-1)}),e.jsx(f,{name:`resident_name_${t}`,value:s.resident_name||"",onChange:a=>x(a.target.value,t),placeholder:"Select or type a name",items:d,required:!1}),e.jsx(u,{message:l==null?void 0:l[`${n.toLowerCase()}.${t}.${i}`],className:"mt-2"}),s.resident_name&&e.jsxs("div",{className:"mt-3 rounded-lg border border-gray-200 bg-white shadow-sm p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-800 mb-4 border-b pb-2",children:[n.slice(0,-1)," Details"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:s.resident_image?`/storage/${s.resident_image}`:"/images/default-avatar.jpg",alt:"Resident",className:"w-24 h-24 object-cover rounded-full border border-gray-300 shadow-sm"}),e.jsx("p",{className:"mt-2 font-medium text-gray-800",children:s.resident_name})]}),e.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-x-6 gap-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Purok:"})," ",s.purok_number||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Birthdate:"})," ",s.birthdate?new Date(s.birthdate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Sex:"})," ",w[s.sex]||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Contact:"})," ",s.contact_number||"—"]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email||"—"]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(v,{value:"Notes"}),e.jsx(_,{name:`${n.toLowerCase()}.${t}.${o}`,value:s[o]||"",onChange:a=>p(a.target.value,t),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 text-sm",rows:"3",placeholder:`Notes for the ${n.slice(0,-1)}...`}),e.jsx(u,{message:l==null?void 0:l[`${n.toLowerCase()}.${t}.${o}`],className:"mt-1"})]}),r.length>1&&e.jsx("button",{type:"button",onClick:()=>b(t),className:"absolute top-1 right-2 text-sm text-red-500 hover:text-red-800",children:e.jsx(N,{className:"text-2xl"})})]},t)),!h&&e.jsxs("button",{type:"button",onClick:g,className:"text-blue-500 hover:text-blue-700 flex items-center gap-1 transition duration-150 font-medium p-1 rounded",children:[e.jsx($,{className:"w-5 h-5"}),e.jsxs("span",{children:["Add ",n.slice(0,-1)]})]})]})};export{P};
