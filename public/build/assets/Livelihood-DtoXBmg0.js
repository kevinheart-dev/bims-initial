import{r as p,j as e,V as g,U as L}from"./app-DluTzGHb.js";import{c as T}from"./index-BubsEo3K.js";import{B as C}from"./button-Dh7fzRxe.js";import{a as W,b as S}from"./index-BfWbB9AT.js";import{C as B,a as E}from"./chevron-up-DZw0GgUV.js";const V=({steps:l,currentStep:s})=>{const[o,d]=p.useState([]),x=p.useRef(),y=(t,i)=>{const m=[...i];for(let u=0;u<m.length;u++)u===t?m[u]={...m[u],highlighted:!0,selected:!0,completed:!1}:u<t?m[u]={...m[u],highlighted:!1,selected:!0,completed:!0}:m[u]={...m[u],highlighted:!1,selected:!1,completed:!1};return m};p.useEffect(()=>{const t=l.map((m,u)=>({description:m,completed:!1,highlighted:u===0,selected:u===0}));x.current=t;const i=y(s-1,x.current);d(i)},[l,s]);const c=[];return o.forEach((t,i)=>{c.push(e.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",children:[e.jsx("div",{className:`rounded-full transition duration-300 ease-in-out border-2 h-9 w-9 md:h-12 md:w-12 flex items-center justify-center text-sm md:text-base font-semibold
                            ${t.highlighted?"text-blue-600 border-blue-600 shadow-md":t.selected?"bg-blue-600 text-white border-blue-600 shadow-md":"border-gray-300 text-gray-500 bg-white"}
                    `,children:t.completed?e.jsx(T,{className:"text-white  text-base md:text-xl"}):i+1}),e.jsx("div",{className:`
                        text-center mt-2 w-20 sm:w-24 md:w-28 text-xs sm:text-sm uppercase leading-tight
                        ${t.highlighted?"font-light":t.selected||t.completed?"font-bold":"font-normal"}
                        ${t.selected||t.completed?"text-blue-700":"text-gray-500"}
                    `,children:t.description})]},`step-${i}`)),i<o.length-1&&c.push(e.jsx("div",{className:`
                        flex-grow border-t-2 transition duration-300 ease-in-out h-px
                        ${t.completed?"border-blue-600":"border-gray-300"}
                    `,style:{marginTop:"18px",minWidth:"40px"}},`line-${i}`))}),e.jsx("div",{className:"flex items-start justify-between px-2 sm:px-4 md:px-6 pt-4 pb-4 md:pt-6 md:pb-6 w-full",children:c})},z=({handleClick:l,currentStep:s,steps:o,userData:d})=>{const x=d?s===o.length&&(d==null?void 0:d.verified)!==1:!1;return e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsxs(C,{variant:"outline",size:"default",onClick:()=>l("back"),className:`px-5 py-2 border-2 shadow-md bg-gray-300 border-gray-300 hover:bg-gray-200 active:bg-gray-300
                        ${s===1?"opacity-50 cursor-not-allowed":""}`,disabled:s===1,children:[e.jsx(W,{}),"Back"]}),e.jsx(C,{onClick:()=>l("next"),size:"default",disabled:x,className:`border-2 bg-blue-600 border-blue-300 hover:bg-blue-700 active:bg-blue-900 text-white px-5 py-2 shadow-md
                        ${x?"opacity-50 cursor-not-allowed":""}`,children:s===o.length?e.jsxs("span",{className:"inline-flex items-center gap-1",children:["Submit ",e.jsx(S,{})]}):e.jsxs("span",{className:"inline-flex items-center gap-1",children:["Next ",e.jsx(S,{})]})})]})})},M=p.createContext(null);function _({title:l,children:s,defaultOpen:o=!1}){const[d,x]=p.useState(o);return e.jsxs("div",{className:"border border-gray-200 rounded-lg shadow-sm mb-2 overflow-hidden",children:[e.jsxs("button",{onClick:()=>x(!d),className:"w-full flex justify-between items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors duration-200",children:[e.jsx("span",{className:"font-medium text-gray-800",children:l}),d?e.jsx(B,{className:"w-5 h-5 text-gray-600"}):e.jsx(E,{className:"w-5 h-5 text-gray-600"})]}),d&&e.jsx("div",{className:"p-4 bg-white border-t border-gray-200 animate-fadeIn",children:s})]})}const A=["Farming","Fishing","Poultry and Livestock","Carpentry","Professional","Government Employee","Private Employee","Brgy. Official or Staff","Businessman/woman","Formal/Licensed Driver","Non-Licensed Driver","Porter","Masseuse","House Helper","Electrician","Laborer","Miner","Lender","Call Center Agent","Medical Transcriptionist","Virtual Assistant"],D=[{category:"Electricity Source",rows:[{type:"Distribution Company (ISELCO-II)",households:""},{type:"Generator",households:""},{type:"Solar (renewable energy source)",households:""},{type:"Battery",households:""},{type:"None",households:""}]},{category:"Bath and Wash Area",rows:[{type:"With own Sink and Bath",households:""},{type:"Shared or Communal",households:""},{type:"Separate Bathroom",households:""}]},{category:"Water Source",rows:[{type:"Level II Water System",households:""},{type:"Level III Water System",households:""},{type:"Deep Well (Level I)",households:""},{type:"Artesian Well (Level I)",households:""},{type:"Shallow Well (Level I)",households:""},{type:"Commercial Water Refill Source",households:""}]},{category:"Waste Management",rows:[{type:"Open Dump Site",households:""},{type:"Sanitary Landfill",households:""},{type:"Compost Pits",households:""},{type:"Material Recovery Facility (MRF)",households:""},{type:"Garbage is collected",households:""}]},{category:"Toilet",rows:[{type:"Water Sealed",households:""},{type:"Compost Pit Toilet",households:""},{type:"Shared or Communal Toilet/Public Toilet",households:""},{type:"No Latrine",households:""},{type:"Flash Toilet",households:""}]}],N=["male_no_dis","male_dis","female_no_dis","female_dis","lgbtq_no_dis","lgbtq_dis"],k=l=>N.reduce((s,o)=>s+(Number(l[o])||0),0),F=(l,s)=>(l==null?void 0:l.reduce((o,d)=>o+(Number(d[s])||0),0))||"",P=l=>(l==null?void 0:l.reduce((s,o)=>s+k(o),0))||"",$=L.memo(function({data:s,updateRow:o,updateType:d,removeRow:x,addRow:y}){return e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Primary Livelihood of Residents"}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsxs("thead",{className:"bg-gray-100",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:"3",className:"border px-2 py-1 w-[250px]",children:"Type of Livelihood"}),e.jsx("th",{colSpan:"6",className:"border px-2 py-1 text-center",children:"NUMBER"}),e.jsx("th",{rowSpan:"3",className:"border px-2 py-1",children:"Total"})]}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Male"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"Female"}),e.jsx("th",{colSpan:"2",className:"border px-2 py-1 text-center",children:"LGBTQ+"})]}),e.jsx("tr",{children:["Without Disability","With Disability","Without Disability","With Disability","Without Disability","With Disability"].map((c,t)=>e.jsx("th",{className:"border px-2 py-1",children:c},t))})]}),e.jsx("tbody",{children:s.map((c,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.type,placeholder:"Enter livelihood type",onChange:i=>d(t,i.target.value)})}),N.map(i=>e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:c[i]??"",onChange:m=>o(t,i,m.target.value)})},i)),e.jsx("td",{className:"border px-2 py-1 font-semibold text-center bg-gray-50",children:k(c)||""}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>x(t),children:"✕"})})]},t))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"border px-2 py-1 text-center",children:"Total"}),N.map(c=>e.jsx("td",{className:"border px-2 py-1 text-center",children:F(s,c)},c)),e.jsx("td",{className:"border px-2 py-1 text-center",children:P(s)})]})})]}),e.jsx("button",{className:"mt-3 text-blue-600 hover:underline",onClick:y,children:"+ Add new row"})]})}),R=L.memo(function({category:s,catIdx:o,updateRow:d,removeRow:x,addRow:y}){return e.jsxs("div",{className:"flex flex-col border rounded",children:[e.jsx("h3",{className:"font-semibold text-md mb-2 p-2",children:s.category}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 w-[300px]",children:"Type"}),e.jsx("th",{className:"border px-2 py-1 text-center",children:"Households"}),e.jsx("th",{className:"px-2 py-1 text-center !border-0"})]})}),e.jsx("tbody",{children:s.rows.map((c,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:e.jsx("input",{type:"text",className:"w-full border p-1",value:c.type,placeholder:"Enter type",onChange:i=>d(o,t,"type",i.target.value)})}),e.jsx("td",{className:"border px-2 py-1 text-center",children:e.jsx("input",{type:"number",className:"w-full border p-1 text-center",value:c.households??"",onChange:i=>d(o,t,"households",i.target.value)})}),e.jsx("td",{className:"px-2 py-1 text-center !border-0",children:e.jsx("button",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-300 hover:bg-gray-200",onClick:()=>x(o,t),children:"✕"})})]},t))})]})}),e.jsx("div",{className:"p-2 mt-auto",children:e.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>y(o),children:"+ Add new row"})})]})});function Q(){var m,u;const{craData:l,setCraData:s}=p.useContext(M);p.useEffect(()=>{s(r=>{var a,h;return{...r,livelihood:(a=r.livelihood)!=null&&a.length?r.livelihood:A.map(n=>({type:n,male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""})),infrastructure:(h=r.infrastructure)!=null&&h.length?r.infrastructure:D}})},[s]);const o=p.useCallback((r,a,h)=>{s(n=>{const b=[...n.livelihood];return b[r]={...b[r],[a]:h===""?"":Number(h)},{...n,livelihood:b}})},[s]),d=p.useCallback((r,a)=>{s(h=>{const n=[...h.livelihood];return n[r]={...n[r],type:a},{...h,livelihood:n}})},[s]),x=p.useCallback(()=>{s(r=>({...r,livelihood:[...r.livelihood,{type:"",male_no_dis:"",male_dis:"",female_no_dis:"",female_dis:"",lgbtq_no_dis:"",lgbtq_dis:""}]})),g.success("Row added!")},[s]),y=p.useCallback(r=>{s(a=>({...a,livelihood:a.livelihood.filter((h,n)=>n!==r)})),g.error("Row removed!")},[s]),c=p.useCallback((r,a,h,n)=>{s(b=>{const j=b.infrastructure.map((f,w)=>w===r?{...f,rows:f.rows.map((v,I)=>I===a?{...v,[h]:h==="households"?n===""?"":Number(n):n}:v)}:f);return{...b,infrastructure:j}})},[s]),t=p.useCallback(r=>{s(a=>{const h=a.infrastructure.map((n,b)=>b===r?{...n,rows:[...n.rows,{type:"",households:""}]}:n);return{...a,infrastructure:h}}),g.success("New row added!")},[s]),i=p.useCallback((r,a)=>{s(h=>{const n=h.infrastructure.map((b,j)=>j===r?{...b,rows:b.rows.filter((f,w)=>w!==a)}:b);return{...h,infrastructure:n}}),g.error("Row removed!")},[s]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{title:"B. Information on Livelihood",children:e.jsx($,{data:l.livelihood||[],updateRow:o,updateType:d,removeRow:y,addRow:x})}),e.jsx(_,{title:"C. Infrastructures and Institutions that provide services to the Barangay",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-4",children:(m=l.infrastructure)==null?void 0:m.slice(0,3).map((r,a)=>e.jsx(R,{category:r,catIdx:a,updateRow:c,removeRow:i,addRow:t},a))}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:(u=l.infrastructure)==null?void 0:u.slice(3).map((r,a)=>e.jsx(R,{category:r,catIdx:a+3,updateRow:c,removeRow:i,addRow:t},a+3))})]})})]})}export{_ as A,Q as L,M as S,V as a,z as b};
