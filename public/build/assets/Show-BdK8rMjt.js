import{K as S,r as t,j as e,L as M,S as u}from"./app-CSbLTV9t.js";import A from"./BreadcrumbsHeader-CQaDVuiA.js";import{S as D}from"./AdminLayout-CQAB1boG.js";import{C as E,a as I}from"./card-CvKypycW.js";import{B as L}from"./badge-eGLk8dnj.js";import{B as d}from"./button-Baqcf9KW.js";import F from"./DeleteConfirmationModal-C2yWkaRr.js";import{t as x,T as P}from"./index-BKWT8n_e.js";import{t as $,B as z}from"./constants-CQOY_faM.js";import{P as U}from"./pencil-BIfwdgX-.js";import{T as q}from"./trash-2-D7SnOmvm.js";import{F as H}from"./file-output-CJ6vmdDa.js";import{c as f}from"./createLucideIcon-K65SoRPX.js";import{U as G}from"./users-B_TjmiJw.js";import"./breadcrumb-BysmSHHT.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-ZDo9j4tz.js";import"./sidebar-EM1pc_Vu.js";import"./input-HZV2GfRj.js";import"./index-BWMtPXXG.js";import"./index-CLKsPuj0.js";import"./floating-ui.react-dom-DHVDvaGl.js";import"./x-DSSMIW7T.js";import"./skeleton-C3jJoeQy.js";import"./tooltip-b0GAWXCC.js";import"./nav-user-qFIfSs4r.js";import"./avatar-DBnd5X0z.js";import"./dropdown-menu-DsAxoPEU.js";import"./check-xGOvrYiq.js";import"./useAppUrl-CCPDQKWJ.js";import"./users-round-CTpkNJgD.js";import"./heart-pulse-CgKjARwL.js";import"./chevron-up-BdT9BwPw.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]],K=f("book-text",V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],X=f("circle-arrow-up",W);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],J=f("info",Y);function Me({blotter_details:s}){var N,y;const w=[{label:"Katarungang Pambarangay",showOnMobile:!1},{label:"Blotter Reports",href:route("blotter_report.index"),showOnMobile:!1},{label:"View Blotter Report",showOnMobile:!0}],o=S().props,l=(o==null?void 0:o.success)??null,p=(o==null?void 0:o.error)??null,[k,h]=t.useState(!1),[j,b]=t.useState(null),g=(a,r)=>{const n=(a==null?void 0:a.filter(c=>c.role_type===r))||[];return n.length===0?e.jsxs("p",{className:"text-gray-500 italic",children:["No ",r,"s recorded."]}):e.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.map((c,i)=>{const m=c.resident?`${c.resident.firstname} ${c.resident.lastname}`:c.name||"Unknown";return e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:m}),c.notes&&e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["(",c.notes,")"]})]},i)})})},R=a=>{b(a),h(!0)},C=()=>{u.delete(route("blotter_report.destroy",j)),h(!1)},T=async()=>{var a;try{const r=await axios.get(route("blotter_report.generateForm",s.id),{responseType:"blob"}),n=new Blob([r.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),c=window.URL.createObjectURL(n),i=document.createElement("a");i.href=c;const m=r.headers["content-disposition"],v=m==null?void 0:m.match(/filename="?([^"]+)"?/),O=v?v[1]:"blotter_report.docx";i.setAttribute("download",O),document.body.appendChild(i),i.click(),i.remove(),x.success("Form generated successfully",{duration:3e3,className:"bg-green-100 text-green-800"})}catch(r){console.error("Form generation failed:",r);let n="An unexpected error occurred. Please try again.";r.response?(a=r.response.data)!=null&&a.message?n=r.response.data.message:r.response.status===404?n="The requested report could not be found.":r.response.status===500?n="A server error occurred while generating the form.":n=`Server responded with status ${r.response.status}.`:r.request?n="No response from server. Please check your internet connection.":n=`Request failed: ${r.message}`,x.error("Failed to generate form",{description:n,duration:6e3,className:"bg-red-100 text-red-800",closeButton:!0})}},B=a=>{u.get(route("blotter_report.edit",a))};return t.useEffect(()=>{l&&x.success(l,{description:"Operation successful!",duration:3e3,closeButton:!0}),o.success=null},[l]),t.useEffect(()=>{p&&x.error(p,{description:"Operation failed!",duration:3e3,closeButton:!0}),o.error=null},[p]),e.jsxs(D,{children:[e.jsx(M,{title:"View Blotter Report"}),e.jsx(A,{breadcrumbs:w}),e.jsx(P,{richColors:!0}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs(E,{className:"shadow-sm border rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50 border-b rounded-t-xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Blotter Report Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review the details of this incident report."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-gray-700 hover:text-blue-600 hover:border-blue-400",onClick:()=>B(s.id),children:[e.jsx(U,{className:"w-4 h-4"}),"Edit"]}),e.jsxs(d,{size:"sm",variant:"destructive",className:"flex items-center gap-1",onClick:()=>R(s.id),children:[e.jsx(q,{className:"w-4 h-4"}),"Delete"]}),e.jsxs(d,{size:"sm",className:"flex items-center gap-1 bg-green-500 hover:bg-green-600 text-white shadow-sm",onClick:T,children:[e.jsx(H,{className:"w-4 h-4"}),"Generate Form"]}),e.jsxs(d,{size:"sm",className:"flex items-center gap-1 bg-indigo-600 hover:bg-indigo-700 text-white shadow-sm",onClick:()=>u.visit(route("summon.elevate",s.id)),children:[e.jsx(X,{className:"w-4 h-4"}),"Elevate to Summon"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-500 mx-5 my-5",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Created At:"})," ",s!=null&&s.created_at?new Date(s.created_at).toLocaleString():"-"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",s!=null&&s.updated_at?new Date(s.updated_at).toLocaleString():"-"]})]}),e.jsxs(I,{className:"px-6 py-2 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Report Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Type of Incident"}),e.jsx("p",{className:"text-base text-gray-900",children:(s==null?void 0:s.type_of_incident)||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Incident Date"}),e.jsx("p",{className:"text-base text-gray-900",children:(s==null?void 0:s.incident_date)||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Location"}),e.jsx("p",{className:"text-base text-gray-900",children:(s==null?void 0:s.location)||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Report Status"}),e.jsx(L,{className:"capitalize mt-1",children:$[s==null?void 0:s.report_status]||"pending"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Recorded By"}),e.jsx("p",{className:"text-base text-gray-900",children:(N=s==null?void 0:s.recorded_by)!=null&&N.resident?`${s.recorded_by.resident.firstname} ${s.recorded_by.resident.middlename||""} ${s.recorded_by.resident.lastname}`:"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Official Position"}),e.jsx("p",{className:"text-base text-gray-900 capitalize",children:z[(y=s==null?void 0:s.recorded_by)==null?void 0:y.position]||"-"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(K,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Narrative"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 border rounded-lg overflow-hidden bg-gray-50",children:[e.jsxs("div",{className:"p-4 border-b md:border-b-0 md:border-r",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Narrative Details"}),e.jsx("p",{className:"whitespace-pre-line break-words text-gray-800",children:(s==null?void 0:s.narrative_details)||"-"})]}),e.jsxs("div",{className:"p-4 border-b md:border-b-0 md:border-r",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Actions Taken"}),e.jsx("p",{className:"whitespace-pre-line break-words text-gray-800",children:(s==null?void 0:s.actions_taken)||"-"})]}),e.jsxs("div",{className:"p-4 border-b md:border-b-0 md:border-r",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Resolution"}),e.jsx("p",{className:"whitespace-pre-line break-words text-gray-800",children:(s==null?void 0:s.resolution)||"-"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Recommendations"}),e.jsx("p",{className:"whitespace-pre-line break-words text-gray-800",children:(s==null?void 0:s.recommendations)||"-"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(G,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Participants"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b md:border-b-0 md:border-r",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Complainants"}),g(s==null?void 0:s.complainants,"complainant")]}),e.jsxs("div",{className:"p-4 border-b md:border-b-0 md:border-r",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Respondents"}),g(s==null?void 0:s.respondents,"respondent")]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Witnesses"}),g(s==null?void 0:s.witnesses,"witness")]})]})]})]})]}),e.jsx(F,{isOpen:k,onClose:()=>h(!1),onConfirm:C,residentId:j})]})]})}export{Me as default};
