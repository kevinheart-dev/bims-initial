import{r,j as n}from"./app-CSbLTV9t.js";import{R as $}from"./index-CLKsPuj0.js";const P=({label:b,name:d,value:l,onChange:c,placeholder:R,items:p=[],disabled:o=!1,readOnly:s=!1,required:v=!1})=>{const[w,u]=r.useState(""),[m,a]=r.useState(!1),[x,E]=r.useState({top:0,left:0,width:0}),f=r.useRef(null),g=r.useRef(null),i=t=>typeof t=="string"?t:t.label,L=t=>typeof t=="string"?t:t.value;r.useEffect(()=>{if(l){const t=p.find(e=>typeof e=="object"?e.value===l:e===l);u(t?i(t):l)}else u("")},[l,p]);const N=t=>{if(o||s)return;const e=t.target.value;u(e),c==null||c({target:{name:d,value:e}}),a(!0)},D=t=>{const e=L(t),V=i(t);u(V),c==null||c({target:{name:d,value:e}}),a(!1)},S=()=>{if(!(o||s)){if(f.current){const t=f.current.getBoundingClientRect();E({top:t.bottom+window.scrollY,left:t.left+window.scrollX,width:t.width})}a(!0)}},h=t=>{g.current&&!g.current.contains(t.target)&&!f.current.contains(t.target)&&a(!1)};r.useEffect(()=>(m&&!(o||s)?document.addEventListener("mousedown",h):document.removeEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)),[m,o,s]);const j=p.filter(t=>i(t).toLowerCase().includes(w.toLowerCase())),y="w-full border rounded-md px-3 py-2 focus:outline-none",I=o||s?"bg-gray-100 text-gray-500 border-gray-300 cursor-not-allowed":"border-gray-400 focus:ring-2 focus:ring-indigo-500 text-gray-800";return n.jsxs("div",{className:"relative",children:[b&&n.jsxs("label",{className:`block text-sm font-semibold mb-3 mt-4 ${o||s?"text-gray-400":"text-gray-700"}`,children:[b,v&&n.jsx("span",{className:"text-red-500",children:" *"})]}),s?n.jsx("div",{className:`${y} ${I} min-h-[38px] flex items-center`,children:w||"-"}):n.jsx("input",{ref:f,type:"text",name:d,value:w,onChange:N,onFocus:S,placeholder:R,className:`${y} ${I}`,autoComplete:"off",disabled:o,required:v}),!o&&!s&&m&&j.length>0&&$.createPortal(n.jsx("ul",{ref:g,style:{position:"absolute",top:x.top,left:x.left,width:x.width,zIndex:9999},className:"max-h-48 overflow-auto rounded-md border border-gray-300 bg-white shadow-md",children:j.map((t,e)=>n.jsx("li",{tabIndex:0,onClick:()=>D(t),className:"px-4 py-2 cursor-pointer hover:bg-gray-100",children:i(t)},e))}),document.body)]})};export{P as D};
